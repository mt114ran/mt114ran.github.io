1:"$Sreact.fragment"
2:I[87555,[],""]
3:I[31295,[],""]
5:I[59665,[],"MetadataBoundary"]
7:I[59665,[],"OutletBoundary"]
a:I[74911,[],"AsyncMetadataOutlet"]
c:I[59665,[],"ViewportBoundary"]
e:I[26614,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/19bdf9af4d1ae4d4.css","style"]
0:{"P":null,"b":"_7bJRY6qUoW0OKfxXCT1j","p":"","c":["","blog","remark-markdown-processor-guide",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","remark-markdown-processor-guide","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/19bdf9af4d1ae4d4.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":[["$","head",null,{"children":["$","link",null,{"rel":"icon","href":"/favicon.png","type":"image/png"}]}],["$","body",null,{"className":"__variable_5cfdac __variable_9a8899 antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","remark-markdown-processor-guide","d"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L4",["$","$L5",null,{"children":"$L6"}],null,["$","$L7",null,{"children":["$L8","$L9",["$","$La",null,{"promise":"$@b"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","CAN-jcjJ5Buf3-Cxrq8L8",{"children":[["$","$Lc",null,{"children":"$Ld"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],null]}],false]],"m":"$undefined","G":["$e","$undefined"],"s":false,"S":true}
f:"$Sreact.suspense"
10:I[74911,[],"AsyncMetadata"]
6:["$","$f",null,{"fallback":null,"children":["$","$L10",null,{"promise":"$@11"}]}]
9:null
12:I[6874,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],""]
14:I[31203,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],"default"]
15:I[4197,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],"default"]
13:T5fb5,<p>Markdownで書かれたブログ記事やドキュメントをWebサイトで表示するには、HTMLに変換する必要があります。本記事では、JavaScriptで最も人気のあるMarkdownプロセッサー「remark」の仕組みと使い方を、初心者にも分かりやすく解説します。</p>
<h2 id="-目次">📚 目次</h2>
<ul>
<li><a href="#remark%E3%81%A8%E3%81%AF">remarkとは？</a></li>
<li><a href="#markdown%E5%A4%89%E6%8F%9B%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF">Markdown変換の仕組み</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9">基本的な使い方</a></li>
<li><a href="#nextjs%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E4%BE%8B">Next.jsでの実装例</a></li>
<li><a href="#%E4%B8%BB%E8%A6%81%E3%81%AAremark%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3">主要なremarkプラグイン</a></li>
<li><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%9C%E6%88%90">カスタムプラグインの作成</a></li>
<li><a href="#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%9C%80%E9%81%A9%E5%8C%96">パフォーマンス最適化</a></li>
<li><a href="#%E3%83%88%E3%83%A9%E3%83%96%E3%83%AB%E3%82%B7%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0">トラブルシューティング</a></li>
</ul>
<h2 id="markdownの基礎知識">Markdownの基礎知識</h2>
<h3 id="markdownとは">Markdownとは？</h3>
<p>Markdownは、テキストファイルに簡単な記号を付けることで、文書の構造を表現できるマークアップ言語です。</p>
<p><strong>基本的なMarkdown記法：</strong></p>
<pre><code class="language-markdown"># 見出し1
## 見出し2

**太字** *斜体*

- リスト項目
- リスト項目

[リンク](https://example.com)
![画像](image.jpg)

`インラインコード`

\`\`\`javascript
// コードブロック
const hello = "world";
\`\`\`
</code></pre>
<h3 id="なぜhtml変換が必要か">なぜHTML変換が必要か？</h3>
<ul>
<li><strong>ブラウザ表示</strong>: ブラウザはHTMLしか理解できない</li>
<li><strong>スタイリング</strong>: CSSでデザインを適用できる</li>
<li><strong>インタラクティブ</strong>: JavaScriptで動的な機能を追加できる</li>
</ul>
<h2 id="remarkとは">remarkとは？</h2>
<p>remarkは、Markdownを処理するためのプラグイン可能なツールです。unifiedエコシステムの一部として、以下の特徴があります：</p>
<ul>
<li><strong>プラグインシステム</strong>：機能を自由に追加・拡張できる</li>
<li><strong>AST（抽象構文木）ベース</strong>：Markdownを構造化データとして扱う</li>
<li><strong>高速処理</strong>：効率的なパース処理</li>
<li><strong>エコシステム</strong>：豊富なプラグインが利用可能</li>
</ul>
<h2 id="markdown変換の仕組み">Markdown変換の仕組み</h2>
<h3 id="基本的な変換フロー">基本的な変換フロー</h3>
<pre><code>Markdown → Parse → AST → Transform → AST → Stringify → HTML
</code></pre>
<ol>
<li><strong>Parse（解析）</strong>：MarkdownテキストをASTに変換</li>
<li><strong>Transform（変換）</strong>：プラグインでASTを加工</li>
<li><strong>Stringify（文字列化）</strong>：ASTをHTMLなどの形式に変換</li>
</ol>
<h3 id="ast抽象構文木とは">AST（抽象構文木）とは？</h3>
<p>ASTは、Markdownの構造を木構造で表現したデータです。</p>
<p><strong>Markdownの例：</strong></p>
<pre><code class="language-markdown"># Hello World

これは**太字**のテキストです。
</code></pre>
<p><strong>ASTの例（簡略化）：</strong></p>
<pre><code class="language-json">{
  "type": "root",
  "children": [
    {
      "type": "heading",
      "depth": 1,
      "children": [
        {
          "type": "text",
          "value": "Hello World"
        }
      ]
    },
    {
      "type": "paragraph",
      "children": [
        {
          "type": "text",
          "value": "これは"
        },
        {
          "type": "strong",
          "children": [
            {
              "type": "text",
              "value": "太字"
            }
          ]
        },
        {
          "type": "text",
          "value": "のテキストです。"
        }
      ]
    }
  ]
}
</code></pre>
<h2 id="基本的な使い方">基本的な使い方</h2>
<h3 id="1-インストール">1. インストール</h3>
<pre><code class="language-bash"># 基本パッケージ
npm install remark remark-html

# GitHub Flavored Markdown対応（表やチェックボックス）
npm install remark-gfm

# フロントマター対応
npm install gray-matter
</code></pre>
<h3 id="2-シンプルな変換">2. シンプルな変換</h3>
<pre><code class="language-javascript">import { remark } from 'remark';
import html from 'remark-html';

const markdown = `
# Hello World

これは**Markdown**です。

- リスト1
- リスト2
`;

async function convertMarkdown() {
  const result = await remark()
    .use(html)
    .process(markdown);
  
  console.log(result.toString());
}

convertMarkdown();
</code></pre>
<p><strong>出力結果：</strong></p>
<pre><code class="language-html">&#x3C;h1>Hello World&#x3C;/h1>
&#x3C;p>これは&#x3C;strong>Markdown&#x3C;/strong>です。&#x3C;/p>
&#x3C;ul>
&#x3C;li>リスト1&#x3C;/li>
&#x3C;li>リスト2&#x3C;/li>
&#x3C;/ul>
</code></pre>
<h3 id="3-プラグインを使った拡張">3. プラグインを使った拡張</h3>
<pre><code class="language-javascript">import { remark } from 'remark';
import html from 'remark-html';
import remarkGfm from 'remark-gfm';

const markdown = `
# タスクリスト

- [x] 完了したタスク
- [ ] 未完了のタスク

## 表

| 項目 | 説明 |
|------|------|
| remark | Markdownプロセッサー |
| unified | テキスト処理フレームワーク |
`;

async function convertWithGfm() {
  const result = await remark()
    .use(remarkGfm)  // GitHub Flavored Markdown
    .use(html)
    .process(markdown);
  
  console.log(result.toString());
}
</code></pre>
<h2 id="nextjsでの実装例">Next.jsでの実装例</h2>
<h3 id="ブログシステムの実装">ブログシステムの実装</h3>
<pre><code class="language-typescript">// lib/posts.ts
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
import { remark } from 'remark';
import html from 'remark-html';
import remarkGfm from 'remark-gfm';

const postsDirectory = path.join(process.cwd(), 'posts');

export async function getPostData(slug: string) {
  const fullPath = path.join(postsDirectory, `${slug}.md`);
  const fileContents = fs.readFileSync(fullPath, 'utf8');
  
  // フロントマターを解析
  const matterResult = matter(fileContents);
  
  // MarkdownをHTMLに変換
  const processedContent = await remark()
    .use(remarkGfm)           // GFM対応
    .use(html, { 
      sanitize: false         // HTMLタグを許可
    })
    .process(matterResult.content);
  
  const contentHtml = processedContent.toString();
  
  return {
    slug,
    contentHtml,
    ...matterResult.data
  };
}
</code></pre>
<h3 id="markdownファイルの例">Markdownファイルの例</h3>
<pre><code class="language-markdown">---
title: "初めてのremark"
date: "2025-01-10"
tags: ["JavaScript", "Markdown"]
---

# remarkを使ってみよう

remarkは**強力な**Markdownプロセッサーです。

## 特徴

- 高速処理
- プラグインシステム
- AST変換

## コード例

\`\`\`javascript
const result = await remark()
  .use(html)
  .process(markdown);
\`\`\`

## 表のサポート

| 機能 | 対応 |
|------|------|
| 基本的なMarkdown | ✅ |
| GFM | ✅ |
| カスタムプラグイン | ✅ |
</code></pre>
<h2 id="主要なremarkプラグイン">主要なremarkプラグイン</h2>
<h3 id="1-remark-gfm">1. remark-gfm</h3>
<p>GitHub Flavored Markdownのサポート</p>
<pre><code class="language-javascript">import remarkGfm from 'remark-gfm';

// 使用例
.use(remarkGfm)
</code></pre>
<p><strong>追加される機能：</strong></p>
<ul>
<li>表（テーブル）</li>
<li>タスクリスト</li>
<li>取り消し線</li>
<li>オートリンク</li>
<li>脚注</li>
</ul>
<h3 id="2-remark-prism--remark-highlight">2. remark-prism / remark-highlight</h3>
<p>シンタックスハイライト</p>
<pre><code class="language-javascript">import remarkPrism from 'remark-prism';

.use(remarkPrism)
</code></pre>
<h3 id="3-remark-toc">3. remark-toc</h3>
<p>目次の自動生成</p>
<pre><code class="language-javascript">import remarkToc from 'remark-toc';

.use(remarkToc, {
  heading: '目次',
  maxDepth: 3
})
</code></pre>
<h3 id="4-remark-emoji">4. remark-emoji</h3>
<p>絵文字のサポート</p>
<pre><code class="language-javascript">import remarkEmoji from 'remark-emoji';

.use(remarkEmoji)
// :smile: → 😄
</code></pre>
<h3 id="5-remark-math--remark-katex">5. remark-math / remark-katex</h3>
<p>数式レンダリング</p>
<pre><code class="language-javascript">import remarkMath from 'remark-math';
import remarkKatex from 'remark-katex';

.use(remarkMath)
.use(remarkKatex)
</code></pre>
<h2 id="カスタムプラグインの作成">カスタムプラグインの作成</h2>
<h3 id="プラグインの基本構造">プラグインの基本構造</h3>
<pre><code class="language-javascript">function myRemarkPlugin(options = {}) {
  return (tree, file) => {
    // ASTを走査して変換
    visit(tree, 'text', (node) => {
      // テキストノードを処理
      node.value = node.value.replace(
        /\[重要\]/g,
        '⚠️ 重要'
      );
    });
  };
}

// 使用
.use(myRemarkPlugin)
</code></pre>
<h3 id="実践例外部リンクに属性を追加">実践例：外部リンクに属性を追加</h3>
<pre><code class="language-javascript">import { visit } from 'unist-util-visit';

function remarkExternalLinks() {
  return (tree) => {
    visit(tree, 'link', (node) => {
      // 外部リンクかチェック
      if (node.url &#x26;&#x26; node.url.startsWith('http')) {
        node.data = node.data || {};
        node.data.hProperties = {
          target: '_blank',
          rel: 'noopener noreferrer'
        };
      }
    });
  };
}
</code></pre>
<h2 id="unifiedエコシステム">unifiedエコシステム</h2>
<p>remarkは「unified」という大きなエコシステムの一部です。</p>
<h3 id="エコシステムの構成">エコシステムの構成</h3>
<pre><code>unified（コア）
├── remark（Markdown処理）
│   ├── remark-parse（Markdown → AST）
│   └── remark-stringify（AST → Markdown）
├── rehype（HTML処理）
│   ├── rehype-parse（HTML → AST）
│   └── rehype-stringify（AST → HTML）
└── retext（自然言語処理）
    ├── retext-english（英語解析）
    └── retext-japanese（日本語解析）
</code></pre>
<h3 id="remark--rehypeの連携">remark + rehypeの連携</h3>
<pre><code class="language-javascript">import { unified } from 'unified';
import remarkParse from 'remark-parse';
import remarkRehype from 'remark-rehype';
import rehypeStringify from 'rehype-stringify';
import rehypeHighlight from 'rehype-highlight';

const processor = unified()
  .use(remarkParse)        // Markdown → mdast
  .use(remarkRehype)       // mdast → hast
  .use(rehypeHighlight)    // コードハイライト
  .use(rehypeStringify);   // hast → HTML

const html = await processor.process(markdown);
</code></pre>
<h2 id="パフォーマンス最適化">パフォーマンス最適化</h2>
<h3 id="1-プロセッサーの再利用">1. プロセッサーの再利用</h3>
<pre><code class="language-javascript">// ❌ 非効率：毎回新しいプロセッサーを作成
async function convertMarkdown(content) {
  return await remark()
    .use(remarkGfm)
    .use(html)
    .process(content);
}

// ✅ 効率的：プロセッサーを再利用
const processor = remark()
  .use(remarkGfm)
  .use(html);

async function convertMarkdown(content) {
  return await processor.process(content);
}
</code></pre>
<h3 id="2-ビルド時の事前処理">2. ビルド時の事前処理</h3>
<pre><code class="language-javascript">// Next.jsのgetStaticProps
export async function getStaticProps({ params }) {
  // ビルド時にMarkdownを変換
  const postData = await getPostData(params.slug);
  
  return {
    props: {
      postData
    }
  };
}
</code></pre>
<h3 id="3-キャッシング">3. キャッシング</h3>
<pre><code class="language-javascript">const cache = new Map();

async function getPostWithCache(slug) {
  if (cache.has(slug)) {
    return cache.get(slug);
  }
  
  const post = await getPostData(slug);
  cache.set(slug, post);
  return post;
}
</code></pre>
<h2 id="トラブルシューティング">トラブルシューティング</h2>
<h3 id="1-表が正しく表示されない">1. 表が正しく表示されない</h3>
<p><strong>問題：</strong> Markdown の表が HTMLのテーブルにならない</p>
<p><strong>解決方法：</strong></p>
<pre><code class="language-javascript">// remark-gfmを追加
import remarkGfm from 'remark-gfm';

.use(remarkGfm)  // これが必要
.use(html)
</code></pre>
<h3 id="2-htmlタグが削除される">2. HTMLタグが削除される</h3>
<p><strong>問題：</strong> MarkdownにHTMLを書いても表示されない</p>
<p><strong>解決方法：</strong></p>
<pre><code class="language-javascript">.use(html, {
  sanitize: false  // サニタイズを無効化
})
</code></pre>
<h3 id="3-改行が反映されない">3. 改行が反映されない</h3>
<p><strong>問題：</strong> Markdownの改行がHTMLに反映されない</p>
<p><strong>解決方法：</strong></p>
<pre><code class="language-javascript">import remarkBreaks from 'remark-breaks';

.use(remarkBreaks)  // 改行を&#x3C;br>に変換
</code></pre>
<h3 id="4-日本語の見出しでidが生成されない">4. 日本語の見出しでIDが生成されない</h3>
<p><strong>問題：</strong> 見出しの自動ID生成で日本語が無視される</p>
<p><strong>解決方法：</strong></p>
<pre><code class="language-javascript">import remarkSlug from 'remark-slug';
import { slugify } from 'transliteration';

.use(remarkSlug, {
  slugify: (text) => slugify(text)
})
</code></pre>
<h2 id="実装チェックリスト">実装チェックリスト</h2>
<p>remarkを使ったMarkdown処理を実装する際のチェックリスト：</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> 必要なパッケージをインストール
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> remark</li>
<li class="task-list-item"><input type="checkbox" disabled> remark-html</li>
<li class="task-list-item"><input type="checkbox" disabled> remark-gfm（表やチェックボックスが必要な場合）</li>
<li class="task-list-item"><input type="checkbox" disabled> gray-matter（フロントマターが必要な場合）</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled> プロセッサーの設定
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> 必要なプラグインを追加</li>
<li class="task-list-item"><input type="checkbox" disabled> オプションを適切に設定</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled> パフォーマンス最適化
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> プロセッサーの再利用</li>
<li class="task-list-item"><input type="checkbox" disabled> ビルド時の事前処理</li>
<li class="task-list-item"><input type="checkbox" disabled> 必要に応じてキャッシング</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled> エラーハンドリング
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> ファイル読み込みエラー</li>
<li class="task-list-item"><input type="checkbox" disabled> パース処理エラー</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled> テスト
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> 基本的なMarkdown要素</li>
<li class="task-list-item"><input type="checkbox" disabled> GFM拡張（表、チェックボックス）</li>
<li class="task-list-item"><input type="checkbox" disabled> カスタムプラグイン</li>
</ul>
</li>
</ul>
<h2 id="ステップバイステップチュートリアル">ステップバイステップチュートリアル</h2>
<h3 id="step-1-最小限の実装">Step 1: 最小限の実装</h3>
<pre><code class="language-javascript">// 1. 必要なパッケージをインポート
const { remark } = require('remark');
const html = require('remark-html');

// 2. Markdownを準備
const markdown = '# Hello World\n\nこれは**Markdown**です。';

// 3. 変換して表示
remark()
  .use(html)
  .process(markdown)
  .then(result => {
    console.log(result.toString());
    // 出力: &#x3C;h1>Hello World&#x3C;/h1>\n&#x3C;p>これは&#x3C;strong>Markdown&#x3C;/strong>です。&#x3C;/p>
  });
</code></pre>
<h3 id="step-2-ファイルから読み込む">Step 2: ファイルから読み込む</h3>
<pre><code class="language-javascript">const fs = require('fs');
const { remark } = require('remark');
const html = require('remark-html');

// Markdownファイルを読み込む
const markdown = fs.readFileSync('article.md', 'utf8');

// HTMLに変換
async function convertToHtml() {
  const result = await remark()
    .use(html)
    .process(markdown);
  
  // HTMLファイルに保存
  fs.writeFileSync('article.html', result.toString());
  console.log('✅ 変換完了！');
}

convertToHtml();
</code></pre>
<h3 id="step-3-プラグインを追加">Step 3: プラグインを追加</h3>
<pre><code class="language-javascript">const { remark } = require('remark');
const html = require('remark-html');
const remarkGfm = require('remark-gfm');

const markdown = `
# TODOリスト

- [x] remarkをインストール
- [ ] プラグインを追加
- [ ] カスタマイズ

| 機能 | 状態 |
|------|------|
| 表 | ✅ |
| チェックボックス | ✅ |
`;

async function convertWithPlugins() {
  const result = await remark()
    .use(remarkGfm)  // GitHub Flavored Markdownを有効化
    .use(html)
    .process(markdown);
  
  console.log(result.toString());
}

convertWithPlugins();
</code></pre>
<h2 id="パフォーマンスベンチマーク">パフォーマンスベンチマーク</h2>
<h3 id="remark-vs-他のmarkdownプロセッサー">remark vs 他のMarkdownプロセッサー</h3>








































<table><thead><tr><th>プロセッサー</th><th>速度</th><th>プラグイン</th><th>AST</th><th>ファイルサイズ</th></tr></thead><tbody><tr><td>remark</td><td>速い</td><td>非常に豊富</td><td>✅</td><td>中</td></tr><tr><td>marked</td><td>最速</td><td>少ない</td><td>❌</td><td>小</td></tr><tr><td>markdown-it</td><td>速い</td><td>豊富</td><td>❌</td><td>中</td></tr><tr><td>showdown</td><td>普通</td><td>普通</td><td>❌</td><td>大</td></tr></tbody></table>
<h3 id="大規模ファイルの処理最適化">大規模ファイルの処理最適化</h3>
<pre><code class="language-javascript">const { unified } = require('unified');
const remarkParse = require('remark-parse');
const remarkRehype = require('remark-rehype');
const rehypeStringify = require('rehype-stringify');
const stream = require('stream');
const { promisify } = require('util');

const pipeline = promisify(stream.pipeline);

// ストリーム処理でメモリ効率を最適化
async function processLargeFile(inputPath, outputPath) {
  const processor = unified()
    .use(remarkParse)
    .use(remarkRehype)
    .use(rehypeStringify);
  
  await pipeline(
    fs.createReadStream(inputPath),
    processor.stream(),
    fs.createWriteStream(outputPath)
  );
  
  console.log('✅ 大規模ファイルの処理完了');
}
</code></pre>
<h2 id="cicdでの活用">CI/CDでの活用</h2>
<h3 id="github-actionsでのドキュメント自動生成">GitHub Actionsでのドキュメント自動生成</h3>
<pre><code class="language-yaml">name: Generate Documentation

on:
  push:
    paths:
      - 'docs/**/*.md'
      - 'README.md'

jobs:
  build-docs:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          
      - name: Install dependencies
        run: npm ci
        
      - name: Build documentation
        run: |
          npm run build:docs
          
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist
</code></pre>
<h3 id="markdownのlinting">MarkdownのLinting</h3>
<pre><code class="language-javascript">// .remarkrc.js
module.exports = {
  plugins: [
    'remark-preset-lint-consistent',
    'remark-preset-lint-recommended',
    'remark-preset-lint-markdown-style-guide',
    ['remark-lint-list-item-indent', 'space'],
    ['remark-lint-no-heading-punctuation', ':.']
  ]
};
</code></pre>
<pre><code class="language-bash"># Lintの実行
npx remark . --quiet --frail
</code></pre>
<h2 id="mdxとの統合">MDXとの統合</h2>
<h3 id="reactコンポーネントの埋め込み">Reactコンポーネントの埋め込み</h3>
<pre><code class="language-jsx">// components/Counter.jsx
export function Counter() {
  const [count, setCount] = useState(0);
  return (
    &#x3C;button onClick={() => setCount(count + 1)}>
      クリック数: {count}
    &#x3C;/button>
  );
}
</code></pre>
<pre><code class="language-mdx"># MDXの例

import { Counter } from './components/Counter';

これは通常のMarkdownです。

&#x3C;Counter />

上にインタラクティブなカウンターが表示されます！
</code></pre>
<pre><code class="language-javascript">// MDXの処理
import { compile } from '@mdx-js/mdx';
import remarkGfm from 'remark-gfm';

const compiled = await compile(mdxContent, {
  remarkPlugins: [remarkGfm],
  rehypePlugins: []
});
</code></pre>
<h2 id="よくあるエラーと対処法">よくあるエラーと対処法</h2>
<h3 id="エラー1-cannot-find-module-remark">エラー1: Cannot find module 'remark'</h3>
<pre><code class="language-bash"># 解決方法
npm install remark remark-html
</code></pre>
<h3 id="エラー2-typeerror-remark-is-not-a-function">エラー2: TypeError: remark is not a function</h3>
<pre><code class="language-javascript">// ❌ 間違ったインポート
const remark = require('remark');

// ✅ 正しいインポート
const { remark } = require('remark');
// または
import { remark } from 'remark';
</code></pre>
<h3 id="エラー3-表が表示されない">エラー3: 表が表示されない</h3>
<pre><code class="language-javascript">// ❌ GFMプラグインがない
.use(html)

// ✅ GFMプラグインを追加
.use(remarkGfm)
.use(html)
</code></pre>
<h2 id="まとめ">まとめ</h2>
<p>remarkは、Markdownを扱うJavaScriptプロジェクトにおいて非常に強力なツールです：</p>
<ol>
<li><strong>柔軟性</strong>：プラグインシステムで機能を自由に拡張</li>
<li><strong>パフォーマンス</strong>：効率的なAST処理</li>
<li><strong>エコシステム</strong>：豊富なプラグインと関連ツール</li>
<li><strong>Next.js統合</strong>：静的サイト生成に最適</li>
</ol>
<p>基本的な使い方から始めて、必要に応じてプラグインを追加していくことで、理想的なMarkdown処理環境を構築できます。</p>
<h2 id="参考リンク">参考リンク</h2>
<ul>
<li><a href="https://github.com/remarkjs/remark">remark公式ドキュメント</a></li>
<li><a href="https://unifiedjs.com/">unified公式サイト</a></li>
<li><a href="https://github.com/remarkjs/remark/blob/main/doc/plugins.md">remark plugins一覧</a></li>
<li><a href="https://astexplorer.net/">AST Explorer</a> - ASTを視覚的に確認できるツール</li>
<li><a href="https://mdxjs.com/">MDX</a> - MarkdownにJSXを埋め込める拡張形式</li>
</ul>4:["$","div",null,{"className":"max-w-2xl mx-auto py-10 px-4","children":[["$","h1",null,{"className":"text-3xl font-bold mb-2","children":[["$","span",null,{"className":"text-green-600","children":["#",29]}]," ","remark完全ガイド：Next.jsでMarkdownをHTMLに変換する仕組み"]}],["$","ul",null,{"className":"list-none border-b border-gray-600 pb-4 mb-6","children":[["$","li",null,{"className":"text-gray-500 text-sm","children":["作成日時: ","2025-08-10 17:15"]}],"$undefined",["$","li",null,{"className":"flex flex-wrap gap-2 mt-2","children":[["$","span","0",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"remark"}],["$","span","1",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"Markdown"}],["$","span","2",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"Next.js"}],["$","span","3",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"unified"}],["$","span","4",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"AST"}],["$","span","5",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"初心者向け"}]]}]]}],["$","nav",null,{"className":"mb-6 pb-4 border-b border-gray-700 flex justify-between","children":[["$","$L12",null,{"href":"/","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"← ホームへ"}],["$","$L12",null,{"href":"/blog","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"記事一覧へ →"}]]}],["$","article",null,{"className":"prose dark:prose-invert","dangerouslySetInnerHTML":{"__html":"$13"}}],["$","$L14",null,{}],["$","nav",null,{"className":"mt-8 pt-4 border-t border-gray-700 flex justify-between","children":[["$","$L12",null,{"href":"/","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"← ホームへ"}],["$","$L12",null,{"href":"/blog","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"記事一覧へ →"}]]}],["$","$L15",null,{}]]}]
d:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:null
11:{"metadata":[["$","title","0",{"children":"Maita Tomoya Dev IO"}],["$","meta","1",{"name":"description","content":"米田智哉の技術ブログ。キャッチアップしたことをメモします。"}]],"error":null,"digest":"$undefined"}
b:{"metadata":"$11:metadata","error":null,"digest":"$undefined"}
