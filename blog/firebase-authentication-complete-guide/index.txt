1:"$Sreact.fragment"
2:I[87555,[],""]
3:I[31295,[],""]
5:I[59665,[],"MetadataBoundary"]
7:I[59665,[],"OutletBoundary"]
a:I[74911,[],"AsyncMetadataOutlet"]
c:I[59665,[],"ViewportBoundary"]
e:I[26614,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/19bdf9af4d1ae4d4.css","style"]
0:{"P":null,"b":"KZrMisSdXyu7FDjuS9HOy","p":"","c":["","blog","firebase-authentication-complete-guide",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","firebase-authentication-complete-guide","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/19bdf9af4d1ae4d4.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":[["$","head",null,{"children":["$","link",null,{"rel":"icon","href":"/favicon.png","type":"image/png"}]}],["$","body",null,{"className":"__variable_5cfdac __variable_9a8899 antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","firebase-authentication-complete-guide","d"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L4",["$","$L5",null,{"children":"$L6"}],null,["$","$L7",null,{"children":["$L8","$L9",["$","$La",null,{"promise":"$@b"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","tZXgehN5NBgxCXjD0kSpa",{"children":[["$","$Lc",null,{"children":"$Ld"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],null]}],false]],"m":"$undefined","G":["$e","$undefined"],"s":false,"S":true}
f:"$Sreact.suspense"
10:I[74911,[],"AsyncMetadata"]
6:["$","$f",null,{"fallback":null,"children":["$","$L10",null,{"promise":"$@11"}]}]
9:null
12:I[6874,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],""]
14:I[31203,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],"default"]
15:I[4197,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],"default"]
13:Tc2e7,<h1 id="firebaseèªè¨¼å®Œå…¨ã‚¬ã‚¤ãƒ‰åˆå¿ƒè€…ã‹ã‚‰ãƒŸãƒ‰ãƒ«ã‚¯ãƒ©ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¾ã§">Firebaseèªè¨¼å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼šåˆå¿ƒè€…ã‹ã‚‰ãƒŸãƒ‰ãƒ«ã‚¯ãƒ©ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¾ã§</h1>
<p>Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã¯æœ€ã‚‚é‡è¦ãªæ©Ÿèƒ½ã®ä¸€ã¤ã§ã™ã€‚Firebase Authenticationï¼ˆFirebaseèªè¨¼ï¼‰ã‚’ä½¿ãˆã°ã€è¤‡é›‘ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã¾ã™ãŒã€åˆå¿ƒè€…ã«ã¨ã£ã¦ã€Œã©ã®èªè¨¼æ–¹å¼ã‚’é¸ã¹ã°è‰¯ã„ã®ã‹ã€ã€Œã©ã†å®Ÿè£…ã™ã‚Œã°è‰¯ã„ã®ã‹ã€ã¯æ‚©ã¾ã—ã„å•é¡Œã§ã™ã€‚</p>
<p>ã“ã®è¨˜äº‹ã§ã¯ã€Firebaseèªè¨¼ã®åŸºæœ¬æ¦‚å¿µã‹ã‚‰å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã€å®Ÿè·µçš„ãªä½¿ã„æ–¹ã¾ã§ã€åˆå¿ƒè€…ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã‚‚ãƒŸãƒ‰ãƒ«ã‚¯ãƒ©ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã‚‚ä¾¡å€¤ã®ã‚ã‚‹å†…å®¹ã‚’ä½“ç³»çš„ã«è§£èª¬ã—ã¾ã™ã€‚</p>
<h2 id="ã“ã®è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨">ã“ã®è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨</h2>
<ul>
<li>âœ… <strong>Firebaseèªè¨¼ã®åŸºæœ¬æ¦‚å¿µã¨ä»•çµ„ã¿</strong></li>
<li>âœ… <strong>ä¸»è¦ãªèªè¨¼æ–¹å¼ï¼ˆãƒ¡ãƒ¼ãƒ«ã€SNSã€é›»è©±ç•ªå·ï¼‰ã®å®Ÿè£…æ–¹æ³•</strong></li>
<li>âœ… <strong>èªè¨¼çŠ¶æ…‹ã®ç®¡ç†ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</strong></li>
<li>âœ… <strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</strong></li>
<li>âœ… <strong>å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ´»ç”¨æ³•</strong></li>
</ul>
<h2 id="firebaseèªè¨¼ã¨ã¯">Firebaseèªè¨¼ã¨ã¯</h2>
<h3 id="èªè¨¼ã¨èªå¯ã®é•ã„">èªè¨¼ã¨èªå¯ã®é•ã„</h3>
<p>ã¾ãšã€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’ç†è§£ã™ã‚‹ä¸Šã§é‡è¦ãªæ¦‚å¿µã‚’æ•´ç†ã—ã¾ã—ã‚‡ã†ï¼š</p>























<table><thead><tr><th>æ¦‚å¿µ</th><th>è‹±èª</th><th>æ„å‘³</th><th>ä¾‹</th></tr></thead><tbody><tr><td><strong>èªè¨¼</strong></td><td>Authentication</td><td>ã€Œã‚ãªãŸã¯èª°ã§ã™ã‹ï¼Ÿã€</td><td>ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª</td></tr><tr><td><strong>èªå¯</strong></td><td>Authorization</td><td>ã€Œã‚ãªãŸã¯ä½•ãŒã§ãã¾ã™ã‹ï¼Ÿã€</td><td>ç®¡ç†è€…æ¨©é™ã€ãƒªã‚½ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹æ¨©</td></tr></tbody></table>
<p>Firebase Authenticationã¯<strong>èªè¨¼</strong>ã‚’æ‹…å½“ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæœ¬å½“ã«ãã®äººã§ã‚ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
<h3 id="firebase-authenticationã®ç‰¹å¾´">Firebase Authenticationã®ç‰¹å¾´</h3>
<p>Firebase Authenticationã¯ã€GoogleãŒæä¾›ã™ã‚‹èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ã§ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ï¼š</p>
<h4 id="-é–‹ç™ºåŠ¹ç‡">ğŸš€ é–‹ç™ºåŠ¹ç‡</h4>
<ul>
<li><strong>ç°¡å˜ãªå®Ÿè£…</strong>ï¼šæ•°è¡Œã®ã‚³ãƒ¼ãƒ‰ã§èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…</li>
<li><strong>è±Šå¯Œãªèªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼</strong>ï¼šãƒ¡ãƒ¼ãƒ«ã€Googleã€GitHubã€Twitterã€é›»è©±ç•ªå·ãªã©</li>
<li><strong>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ</strong>ï¼šèªè¨¼çŠ¶æ…‹ã®å¤‰åŒ–ã‚’è‡ªå‹•ã§æ¤œçŸ¥</li>
</ul>
<h4 id="-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£">ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h4>
<ul>
<li><strong>æ¥­ç•Œæ¨™æº–ã®æš—å·åŒ–</strong>ï¼šãƒˆãƒ¼ã‚¯ãƒ³ã®å®‰å…¨ãªç®¡ç†</li>
<li><strong>ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹å¯¾ç­–</strong>ï¼šãƒ¬ãƒ¼ãƒˆåˆ¶é™ã€ç•°å¸¸æ¤œçŸ¥</li>
<li><strong>GDPRæº–æ‹ </strong>ï¼šãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·å¯¾å¿œ</li>
</ul>
<h4 id="-ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ">ğŸ“± ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </h4>
<ul>
<li><strong>Webã€iOSã€Android</strong>ï¼šåŒä¸€ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ™ãƒ¼ã‚¹</li>
<li><strong>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ Database/Firestore</strong>ã¨ã®é€£æº</li>
</ul>
<p>è©³ç´°ã¯<a href="https://firebase.google.com/docs/auth">Firebase Authenticationå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p>
<h2 id="åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—">åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h2>
<h3 id="1-firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ">1. Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ</h3>
<ol>
<li>
<p><strong>Firebase Console</strong>ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ</p>
<ul>
<li><a href="https://console.firebase.google.com/">Firebase Console</a>ã«ã‚¢ã‚¯ã‚»ã‚¹</li>
<li>ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
<li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›</li>
</ul>
</li>
<li>
<p><strong>Webã‚¢ãƒ—ãƒªã‚’è¿½åŠ </strong></p>
<ul>
<li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‹ã‚‰ã€ŒWebã‚¢ãƒ—ãƒªã‚’è¿½åŠ ã€</li>
<li>ã‚¢ãƒ—ãƒªã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›</li>
<li>Firebase SDKã®è¨­å®šã‚’å–å¾—</li>
</ul>
</li>
<li>
<p><strong>Authenticationæ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–</strong></p>
<ul>
<li>Firebase Console > Authentication > Sign-in method</li>
<li>ä½¿ç”¨ã—ãŸã„èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æœ‰åŠ¹åŒ–</li>
</ul>
</li>
</ol>
<h3 id="2-firebase-sdkã®å°å…¥">2. Firebase SDKã®å°å…¥</h3>
<pre><code class="language-bash"># npm ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ
npm install firebase

# yarn ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ
yarn add firebase
</code></pre>
<h3 id="3-firebaseåˆæœŸåŒ–">3. FirebaseåˆæœŸåŒ–</h3>
<pre><code class="language-javascript">// firebase-config.js
import { initializeApp } from 'firebase/app';
import { getAuth } from 'firebase/auth';

// Firebaseè¨­å®šï¼ˆFirebase Consoleã‹ã‚‰å–å¾—ï¼‰
const firebaseConfig = {
  apiKey: "your-api-key",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "123456789",
  appId: "your-app-id"
};

// Firebaseã‚¢ãƒ—ãƒªã®åˆæœŸåŒ–
const app = initializeApp(firebaseConfig);

// Authentication ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å–å¾—
export const auth = getAuth(app);
export default app;
</code></pre>
<h2 id="ä¸»è¦ãªèªè¨¼æ–¹å¼ã®å®Ÿè£…">ä¸»è¦ãªèªè¨¼æ–¹å¼ã®å®Ÿè£…</h2>
<h3 id="1-ãƒ¡ãƒ¼ãƒ«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼">1. ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼</h3>
<p>æœ€ã‚‚åŸºæœ¬çš„ãªèªè¨¼æ–¹å¼ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã€èªè¨¼ã‚’è¡Œã„ã¾ã™ã€‚</p>
<pre><code class="language-javascript">import { 
  createUserWithEmailAndPassword, 
  signInWithEmailAndPassword,
  signOut,
  sendPasswordResetEmail,
  updateProfile
} from 'firebase/auth';
import { auth } from './firebase-config.js';

// æ–°è¦ç™»éŒ²
export const signUp = async (email, password, displayName) => {
  try {
    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;
    
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®æ›´æ–°
    if (displayName) {
      await updateProfile(user, {
        displayName: displayName
      });
    }
    
    console.log('æ–°è¦ç™»éŒ²æˆåŠŸ:', user);
    return { success: true, user };
  } catch (error) {
    console.error('æ–°è¦ç™»éŒ²ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getErrorMessage(error) };
  }
};

// ãƒ­ã‚°ã‚¤ãƒ³
export const signIn = async (email, password) => {
  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;
    
    console.log('ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ:', user);
    return { success: true, user };
  } catch (error) {
    console.error('ãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getErrorMessage(error) };
  }
};

// ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
export const logOut = async () => {
  try {
    await signOut(auth);
    console.log('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæˆåŠŸ');
    return { success: true };
  } catch (error) {
    console.error('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getErrorMessage(error) };
  }
};

// ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
export const resetPassword = async (email) => {
  try {
    await sendPasswordResetEmail(auth, email);
    console.log('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡å®Œäº†');
    return { success: true };
  } catch (error) {
    console.error('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getErrorMessage(error) };
  }
};

// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¤‰æ›
const getErrorMessage = (error) => {
  switch (error.code) {
    case 'auth/email-already-in-use':
      return 'ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™';
    case 'auth/weak-password':
      return 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šã§è¨­å®šã—ã¦ãã ã•ã„';
    case 'auth/invalid-email':
      return 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“';
    case 'auth/user-not-found':
      return 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“';
    case 'auth/wrong-password':
      return 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™';
    default:
      return error.message;
  }
};
</code></pre>
<h4 id="react-ã§ã®ä½¿ç”¨ä¾‹">React ã§ã®ä½¿ç”¨ä¾‹</h4>
<pre><code class="language-jsx">import React, { useState } from 'react';
import { signUp, signIn, resetPassword } from './auth-service';

const AuthForm = () => {
  const [isLogin, setIsLogin] = useState(true);
  const [formData, setFormData] = useState({
    email: '',
    password: '',
    displayName: ''
  });
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setMessage('');

    try {
      let result;
      if (isLogin) {
        result = await signIn(formData.email, formData.password);
      } else {
        result = await signUp(formData.email, formData.password, formData.displayName);
      }

      if (result.success) {
        setMessage('æˆåŠŸã—ã¾ã—ãŸï¼');
      } else {
        setMessage(result.error);
      }
    } catch (error) {
      setMessage('äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
    } finally {
      setLoading(false);
    }
  };

  const handlePasswordReset = async () => {
    if (!formData.email) {
      setMessage('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
      return;
    }

    const result = await resetPassword(formData.email);
    setMessage(
      result.success 
        ? 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸ' 
        : result.error
    );
  };

  return (
    &#x3C;div className="auth-form">
      &#x3C;h2>{isLogin ? 'ãƒ­ã‚°ã‚¤ãƒ³' : 'æ–°è¦ç™»éŒ²'}&#x3C;/h2>
      
      &#x3C;form onSubmit={handleSubmit}>
        &#x3C;div className="form-group">
          &#x3C;input
            type="email"
            placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
            value={formData.email}
            onChange={(e) => setFormData({...formData, email: e.target.value})}
            required
          />
        &#x3C;/div>

        &#x3C;div className="form-group">
          &#x3C;input
            type="password"
            placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"
            value={formData.password}
            onChange={(e) => setFormData({...formData, password: e.target.value})}
            required
          />
        &#x3C;/div>

        {!isLogin &#x26;&#x26; (
          &#x3C;div className="form-group">
            &#x3C;input
              type="text"
              placeholder="è¡¨ç¤ºå"
              value={formData.displayName}
              onChange={(e) => setFormData({...formData, displayName: e.target.value})}
            />
          &#x3C;/div>
        )}

        &#x3C;button type="submit" disabled={loading}>
          {loading ? 'å‡¦ç†ä¸­...' : (isLogin ? 'ãƒ­ã‚°ã‚¤ãƒ³' : 'ç™»éŒ²')}
        &#x3C;/button>
      &#x3C;/form>

      &#x3C;div className="auth-options">
        &#x3C;button 
          type="button" 
          onClick={() => setIsLogin(!isLogin)}
        >
          {isLogin ? 'æ–°è¦ç™»éŒ²ã¯ã“ã¡ã‚‰' : 'ãƒ­ã‚°ã‚¤ãƒ³ã¯ã“ã¡ã‚‰'}
        &#x3C;/button>

        {isLogin &#x26;&#x26; (
          &#x3C;button 
            type="button" 
            onClick={handlePasswordReset}
          >
            ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚ŒãŸæ–¹
          &#x3C;/button>
        )}
      &#x3C;/div>

      {message &#x26;&#x26; &#x3C;p className="message">{message}&#x3C;/p>}
    &#x3C;/div>
  );
};

export default AuthForm;
</code></pre>
<h3 id="2-ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³">2. ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³</h3>
<p>SNSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ã£ãŸèªè¨¼ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰‹é–“ã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã‚‹äººæ°—ã®èªè¨¼æ–¹å¼ã§ã™ã€‚</p>
<h4 id="googleèªè¨¼">Googleèªè¨¼</h4>
<pre><code class="language-javascript">import { 
  GoogleAuthProvider, 
  signInWithPopup, 
  signInWithRedirect,
  getRedirectResult 
} from 'firebase/auth';
import { auth } from './firebase-config.js';

// Googleãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è¨­å®š
const googleProvider = new GoogleAuthProvider();

// ã‚¹ã‚³ãƒ¼ãƒ—ã®è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
googleProvider.addScope('profile');
googleProvider.addScope('email');

// ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§Googleãƒ­ã‚°ã‚¤ãƒ³
export const signInWithGooglePopup = async () => {
  try {
    const result = await signInWithPopup(auth, googleProvider);
    const user = result.user;
    
    // Googleèªè¨¼ã®è¿½åŠ æƒ…å ±
    const credential = GoogleAuthProvider.credentialFromResult(result);
    const accessToken = credential?.accessToken;
    
    console.log('Googleãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ:', {
      user,
      accessToken
    });
    
    return { success: true, user, accessToken };
  } catch (error) {
    console.error('Googleãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getGoogleErrorMessage(error) };
  }
};

// ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§Googleãƒ­ã‚°ã‚¤ãƒ³ï¼ˆãƒ¢ãƒã‚¤ãƒ«æ¨å¥¨ï¼‰
export const signInWithGoogleRedirect = async () => {
  try {
    await signInWithRedirect(auth, googleProvider);
    return { success: true };
  } catch (error) {
    console.error('Googleãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getGoogleErrorMessage(error) };
  }
};

// ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå¾Œã®çµæœã‚’å–å¾—
export const getGoogleRedirectResult = async () => {
  try {
    const result = await getRedirectResult(auth);
    if (result) {
      const user = result.user;
      const credential = GoogleAuthProvider.credentialFromResult(result);
      const accessToken = credential?.accessToken;
      
      return { success: true, user, accessToken };
    }
    return { success: true, user: null };
  } catch (error) {
    console.error('Googleãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆçµæœã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getGoogleErrorMessage(error) };
  }
};

const getGoogleErrorMessage = (error) => {
  switch (error.code) {
    case 'auth/account-exists-with-different-credential':
      return 'åˆ¥ã®èªè¨¼æ–¹æ³•ã§æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã™';
    case 'auth/cancelled-popup-request':
      return 'ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ';
    case 'auth/popup-blocked':
      return 'ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™';
    case 'auth/popup-closed-by-user':
      return 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã¾ã—ãŸ';
    default:
      return error.message;
  }
};
</code></pre>
<h4 id="githubèªè¨¼">GitHubèªè¨¼</h4>
<pre><code class="language-javascript">import { 
  GithubAuthProvider, 
  signInWithPopup 
} from 'firebase/auth';
import { auth } from './firebase-config.js';

const githubProvider = new GithubAuthProvider();

// GitHubãƒ­ã‚°ã‚¤ãƒ³
export const signInWithGithub = async () => {
  try {
    const result = await signInWithPopup(auth, githubProvider);
    const user = result.user;
    
    // GitHubèªè¨¼ã®è¿½åŠ æƒ…å ±
    const credential = GithubAuthProvider.credentialFromResult(result);
    const accessToken = credential?.accessToken;
    
    console.log('GitHubãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ:', {
      user,
      accessToken
    });
    
    return { success: true, user, accessToken };
  } catch (error) {
    console.error('GitHubãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: error.message };
  }
};
</code></pre>
<h4 id="react-ã§ã®ä½¿ç”¨ä¾‹-1">React ã§ã®ä½¿ç”¨ä¾‹</h4>
<pre><code class="language-jsx">import React from 'react';
import { 
  signInWithGooglePopup, 
  signInWithGithub,
  getGoogleRedirectResult 
} from './social-auth-service';

const SocialAuth = () => {
  const [loading, setLoading] = useState(false);

  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒã‚¦ãƒ³ãƒˆæ™‚ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆçµæœã‚’ãƒã‚§ãƒƒã‚¯
  useEffect(() => {
    const checkRedirectResult = async () => {
      const result = await getGoogleRedirectResult();
      if (result.success &#x26;&#x26; result.user) {
        console.log('ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆèªè¨¼æˆåŠŸ:', result.user);
      }
    };
    
    checkRedirectResult();
  }, []);

  const handleGoogleLogin = async () => {
    setLoading(true);
    const result = await signInWithGooglePopup();
    setLoading(false);
    
    if (result.success) {
      console.log('Googleèªè¨¼æˆåŠŸ');
    } else {
      alert(result.error);
    }
  };

  const handleGithubLogin = async () => {
    setLoading(true);
    const result = await signInWithGithub();
    setLoading(false);
    
    if (result.success) {
      console.log('GitHubèªè¨¼æˆåŠŸ');
    } else {
      alert(result.error);
    }
  };

  return (
    &#x3C;div className="social-auth">
      &#x3C;h3>ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³&#x3C;/h3>
      
      &#x3C;button 
        onClick={handleGoogleLogin} 
        disabled={loading}
        className="google-login-btn"
      >
        &#x3C;img src="/google-icon.svg" alt="Google" />
        Googleã§ãƒ­ã‚°ã‚¤ãƒ³
      &#x3C;/button>
      
      &#x3C;button 
        onClick={handleGithubLogin} 
        disabled={loading}
        className="github-login-btn"
      >
        &#x3C;img src="/github-icon.svg" alt="GitHub" />
        GitHubã§ãƒ­ã‚°ã‚¤ãƒ³
      &#x3C;/button>
    &#x3C;/div>
  );
};

export default SocialAuth;
</code></pre>
<h3 id="3-é›»è©±ç•ªå·èªè¨¼">3. é›»è©±ç•ªå·èªè¨¼</h3>
<p>SMSèªè¨¼ã«ã‚ˆã‚‹é›»è©±ç•ªå·èªè¨¼ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒé«˜ãã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§åˆ©ç”¨ã§ãã‚‹èªè¨¼æ–¹å¼ã§ã™ã€‚</p>
<pre><code class="language-javascript">import { 
  signInWithPhoneNumber, 
  RecaptchaVerifier,
  linkWithCredential,
  PhoneAuthProvider 
} from 'firebase/auth';
import { auth } from './firebase-config.js';

// reCAPTCHAè¨­å®š
export const setupRecaptcha = (elementId = 'recaptcha-container') => {
  if (window.recaptchaVerifier) {
    window.recaptchaVerifier.clear();
  }

  window.recaptchaVerifier = new RecaptchaVerifier(auth, elementId, {
    'size': 'normal',
    'callback': (response) => {
      console.log('reCAPTCHA solved');
    },
    'expired-callback': () => {
      console.log('reCAPTCHA expired');
    }
  });
};

// é›»è©±ç•ªå·ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³
export const signInWithPhone = async (phoneNumber) => {
  try {
    if (!window.recaptchaVerifier) {
      setupRecaptcha();
    }

    const confirmationResult = await signInWithPhoneNumber(
      auth, 
      phoneNumber, 
      window.recaptchaVerifier
    );
    
    console.log('SMSé€ä¿¡æˆåŠŸ');
    return { success: true, confirmationResult };
  } catch (error) {
    console.error('é›»è©±ç•ªå·èªè¨¼ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getPhoneErrorMessage(error) };
  }
};

// SMSèªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª
export const confirmPhoneCode = async (confirmationResult, code) => {
  try {
    const result = await confirmationResult.confirm(code);
    const user = result.user;
    
    console.log('é›»è©±ç•ªå·èªè¨¼æˆåŠŸ:', user);
    return { success: true, user };
  } catch (error) {
    console.error('èªè¨¼ã‚³ãƒ¼ãƒ‰ç¢ºèªã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getPhoneErrorMessage(error) };
  }
};

// æ—¢å­˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«é›»è©±ç•ªå·ã‚’è¿½åŠ 
export const linkPhoneNumber = async (phoneNumber) => {
  try {
    const currentUser = auth.currentUser;
    if (!currentUser) {
      throw new Error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“');
    }

    if (!window.recaptchaVerifier) {
      setupRecaptcha();
    }

    const confirmationResult = await signInWithPhoneNumber(
      auth, 
      phoneNumber, 
      window.recaptchaVerifier
    );

    return { success: true, confirmationResult };
  } catch (error) {
    console.error('é›»è©±ç•ªå·è¿½åŠ ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getPhoneErrorMessage(error) };
  }
};

// é›»è©±ç•ªå·ãƒªãƒ³ã‚¯ã‚’ç¢ºèª
export const confirmPhoneLink = async (confirmationResult, code) => {
  try {
    const currentUser = auth.currentUser;
    if (!currentUser) {
      throw new Error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“');
    }

    const phoneCredential = PhoneAuthProvider.credential(
      confirmationResult.verificationId,
      code
    );

    const result = await linkWithCredential(currentUser, phoneCredential);
    console.log('é›»è©±ç•ªå·è¿½åŠ æˆåŠŸ:', result.user);
    return { success: true, user: result.user };
  } catch (error) {
    console.error('é›»è©±ç•ªå·ãƒªãƒ³ã‚¯ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: getPhoneErrorMessage(error) };
  }
};

const getPhoneErrorMessage = (error) => {
  switch (error.code) {
    case 'auth/invalid-phone-number':
      return 'é›»è©±ç•ªå·ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“';
    case 'auth/missing-phone-number':
      return 'é›»è©±ç•ªå·ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“';
    case 'auth/quota-exceeded':
      return 'SMSé€ä¿¡ã®åˆ¶é™ã«é”ã—ã¾ã—ãŸ';
    case 'auth/invalid-verification-code':
      return 'èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“';
    case 'auth/credential-already-in-use':
      return 'ã“ã®é›»è©±ç•ªå·ã¯æ—¢ã«ä»–ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™';
    default:
      return error.message;
  }
};
</code></pre>
<p>é›»è©±ç•ªå·èªè¨¼ã«ã¤ã„ã¦ã¯<a href="../0046_firebase-phone-authentication-guide">Firebaseé›»è©±ç•ªå·èªè¨¼å®Œå…¨ã‚¬ã‚¤ãƒ‰</a>ã§ã‚ˆã‚Šè©³ã—ãè§£èª¬ã—ã¦ã„ã¾ã™ã€‚</p>
<h2 id="èªè¨¼çŠ¶æ…‹ã®ç®¡ç†">èªè¨¼çŠ¶æ…‹ã®ç®¡ç†</h2>
<p>Firebaseèªè¨¼ã®é‡è¦ãªæ©Ÿèƒ½ã®ä¸€ã¤ãŒã€èªè¨¼çŠ¶æ…‹ã®è‡ªå‹•ç›£è¦–ã§ã™ã€‚</p>
<h3 id="react-ã§ã®èªè¨¼çŠ¶æ…‹ç®¡ç†">React ã§ã®èªè¨¼çŠ¶æ…‹ç®¡ç†</h3>
<pre><code class="language-jsx">import React, { createContext, useContext, useEffect, useState } from 'react';
import { onAuthStateChanged } from 'firebase/auth';
import { auth } from './firebase-config';

// èªè¨¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ä½œæˆ
const AuthContext = createContext({});

// èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // èªè¨¼çŠ¶æ…‹ã®ç›£è¦–
    const unsubscribe = onAuthStateChanged(auth, (user) => {
      console.log('èªè¨¼çŠ¶æ…‹å¤‰æ›´:', user);
      setUser(user);
      setLoading(false);
    });

    // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    return unsubscribe;
  }, []);

  const value = {
    user,
    loading,
    isAuthenticated: !!user
  };

  return (
    &#x3C;AuthContext.Provider value={value}>
      {!loading &#x26;&#x26; children}
    &#x3C;/AuthContext.Provider>
  );
};

// ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuthã¯AuthProviderå†…ã§ä½¿ç”¨ã—ã¦ãã ã•ã„');
  }
  return context;
};

// ä½¿ç”¨ä¾‹: App.js
const App = () => {
  return (
    &#x3C;AuthProvider>
      &#x3C;Router>
        &#x3C;Routes>
          &#x3C;Route path="/login" element={&#x3C;LoginPage />} />
          &#x3C;Route path="/dashboard" element={&#x3C;ProtectedRoute>&#x3C;Dashboard />&#x3C;/ProtectedRoute>} />
          &#x3C;Route path="/" element={&#x3C;HomePage />} />
        &#x3C;/Routes>
      &#x3C;/Router>
    &#x3C;/AuthProvider>
  );
};

// ãƒ—ãƒ­ãƒ†ã‚¯ãƒˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆ
const ProtectedRoute = ({ children }) => {
  const { isAuthenticated, loading } = useAuth();

  if (loading) {
    return &#x3C;div>Loading...&#x3C;/div>;
  }

  if (!isAuthenticated) {
    return &#x3C;Navigate to="/login" replace />;
  }

  return children;
};
</code></pre>
<h3 id="vuejs-ã§ã®èªè¨¼çŠ¶æ…‹ç®¡ç†">Vue.js ã§ã®èªè¨¼çŠ¶æ…‹ç®¡ç†</h3>
<pre><code class="language-javascript">// composables/useAuth.js
import { ref, onMounted, onUnmounted } from 'vue';
import { onAuthStateChanged } from 'firebase/auth';
import { auth } from './firebase-config';

export const useAuth = () => {
  const user = ref(null);
  const loading = ref(true);
  const isAuthenticated = computed(() => !!user.value);

  let unsubscribe;

  onMounted(() => {
    unsubscribe = onAuthStateChanged(auth, (firebaseUser) => {
      console.log('èªè¨¼çŠ¶æ…‹å¤‰æ›´:', firebaseUser);
      user.value = firebaseUser;
      loading.value = false;
    });
  });

  onUnmounted(() => {
    if (unsubscribe) {
      unsubscribe();
    }
  });

  return {
    user: readonly(user),
    loading: readonly(loading),
    isAuthenticated
  };
};

// ä½¿ç”¨ä¾‹: App.vue
&#x3C;template>
  &#x3C;div id="app">
    &#x3C;div v-if="loading">Loading...&#x3C;/div>
    &#x3C;router-view v-else />
  &#x3C;/div>
&#x3C;/template>

&#x3C;script setup>
import { useAuth } from './composables/useAuth';

const { loading } = useAuth();
&#x3C;/script>
</code></pre>
<h2 id="å¿œç”¨çš„ãªä½¿ã„æ–¹">å¿œç”¨çš„ãªä½¿ã„æ–¹</h2>
<h3 id="1-è¤‡æ•°èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®é€£æº">1. è¤‡æ•°èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®é€£æº</h3>
<p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¤‡æ•°ã®èªè¨¼æ–¹æ³•ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹å®Ÿè£…ä¾‹ï¼š</p>
<pre><code class="language-javascript">import { 
  linkWithCredential, 
  unlink,
  reauthenticateWithCredential 
} from 'firebase/auth';
import { auth } from './firebase-config';

// ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’è¿½åŠ 
export const linkProvider = async (credential) => {
  try {
    const currentUser = auth.currentUser;
    if (!currentUser) {
      throw new Error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“');
    }

    const result = await linkWithCredential(currentUser, credential);
    console.log('ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¿½åŠ æˆåŠŸ:', result.user);
    return { success: true, user: result.user };
  } catch (error) {
    console.error('ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¿½åŠ ã‚¨ãƒ©ãƒ¼:', error);
    
    if (error.code === 'auth/requires-recent-login') {
      return { success: false, error: 'å†èªè¨¼ãŒå¿…è¦ã§ã™', needsReauth: true };
    }
    
    return { success: false, error: error.message };
  }
};

// èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’å‰Šé™¤
export const unlinkProvider = async (providerId) => {
  try {
    const currentUser = auth.currentUser;
    if (!currentUser) {
      throw new Error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“');
    }

    const result = await unlink(currentUser, providerId);
    console.log('ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å‰Šé™¤æˆåŠŸ:', result);
    return { success: true, user: result };
  } catch (error) {
    console.error('ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å‰Šé™¤ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: error.message };
  }
};

// é€£æºæ¸ˆã¿ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å–å¾—
export const getLinkedProviders = () => {
  const currentUser = auth.currentUser;
  if (!currentUser) return [];

  return currentUser.providerData.map(provider => ({
    providerId: provider.providerId,
    uid: provider.uid,
    displayName: provider.displayName,
    email: provider.email,
    phoneNumber: provider.phoneNumber
  }));
};

// ä½¿ç”¨ä¾‹: ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ç®¡ç†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
const ProviderManager = () => {
  const [linkedProviders, setLinkedProviders] = useState([]);
  const { user } = useAuth();

  useEffect(() => {
    if (user) {
      setLinkedProviders(getLinkedProviders());
    }
  }, [user]);

  const handleLinkGoogle = async () => {
    const result = await signInWithGooglePopup();
    if (result.success &#x26;&#x26; result.credential) {
      const linkResult = await linkProvider(result.credential);
      if (linkResult.success) {
        setLinkedProviders(getLinkedProviders());
        alert('Googleèªè¨¼ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ');
      }
    }
  };

  const handleUnlinkProvider = async (providerId) => {
    const result = await unlinkProvider(providerId);
    if (result.success) {
      setLinkedProviders(getLinkedProviders());
      alert('èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸ');
    }
  };

  return (
    &#x3C;div className="provider-manager">
      &#x3C;h3>èªè¨¼æ–¹æ³•ã®ç®¡ç†&#x3C;/h3>
      
      &#x3C;div className="linked-providers">
        &#x3C;h4>é€£æºæ¸ˆã¿èªè¨¼æ–¹æ³•&#x3C;/h4>
        {linkedProviders.map(provider => (
          &#x3C;div key={provider.providerId} className="provider-item">
            &#x3C;span>{provider.providerId}&#x3C;/span>
            &#x3C;span>{provider.email || provider.phoneNumber}&#x3C;/span>
            {linkedProviders.length > 1 &#x26;&#x26; (
              &#x3C;button onClick={() => handleUnlinkProvider(provider.providerId)}>
                å‰Šé™¤
              &#x3C;/button>
            )}
          &#x3C;/div>
        ))}
      &#x3C;/div>

      &#x3C;div className="available-providers">
        &#x3C;h4>è¿½åŠ å¯èƒ½ãªèªè¨¼æ–¹æ³•&#x3C;/h4>
        {!linkedProviders.find(p => p.providerId === 'google.com') &#x26;&#x26; (
          &#x3C;button onClick={handleLinkGoogle}>
            Googleèªè¨¼ã‚’è¿½åŠ 
          &#x3C;/button>
        )}
      &#x3C;/div>
    &#x3C;/div>
  );
};
</code></pre>
<h3 id="2-ã‚«ã‚¹ã‚¿ãƒ èªè¨¼">2. ã‚«ã‚¹ã‚¿ãƒ èªè¨¼</h3>
<p>ç‹¬è‡ªã®èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãŒã‚ã‚‹å ´åˆã«ã€Firebaseèªè¨¼ã¨é€£æºã™ã‚‹æ–¹æ³•ï¼š</p>
<pre><code class="language-javascript">// ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã£ãŸèªè¨¼
import { signInWithCustomToken } from 'firebase/auth';
import { auth } from './firebase-config';

export const signInWithCustom = async (customToken) => {
  try {
    const userCredential = await signInWithCustomToken(auth, customToken);
    const user = userCredential.user;
    
    console.log('ã‚«ã‚¹ã‚¿ãƒ èªè¨¼æˆåŠŸ:', user);
    return { success: true, user };
  } catch (error) {
    console.error('ã‚«ã‚¹ã‚¿ãƒ èªè¨¼ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: error.message };
  }
};

// ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã™ã‚‹ä¾‹ï¼ˆNode.jsï¼‰
// ã“ã®éƒ¨åˆ†ã¯é€šå¸¸ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§å®Ÿè£…ã—ã¾ã™
/*
const admin = require('firebase-admin');

// ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ¼ã‚¯ãƒ³ã®ç”Ÿæˆ
const createCustomToken = async (uid, additionalClaims = {}) => {
  try {
    const customToken = await admin.auth().createCustomToken(uid, additionalClaims);
    return { success: true, token: customToken };
  } catch (error) {
    console.error('ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: error.message };
  }
};
*/
</code></pre>
<h2 id="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>
<h3 id="1-firebase-security-rulesã¨ã®é€£æº">1. Firebase Security Rulesã¨ã®é€£æº</h3>
<pre><code class="language-javascript">// Firestore Security Rules ã®ä¾‹
/*
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
    match /users/{userId} {
      allow read, write: if request.auth != null &#x26;&#x26; request.auth.uid == userId;
    }
    
    // ç®¡ç†è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
    match /admin/{document} {
      allow read, write: if request.auth != null &#x26;&#x26; 
        request.auth.token.admin == true;
    }
  }
}
*/

// ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã®è¨­å®šï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ï¼‰
/*
const admin = require('firebase-admin');

const setAdminRole = async (uid) => {
  try {
    await admin.auth().setCustomUserClaims(uid, { admin: true });
    console.log(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ ${uid} ã«ç®¡ç†è€…æ¨©é™ã‚’ä»˜ä¸`);
  } catch (error) {
    console.error('ç®¡ç†è€…æ¨©é™ä»˜ä¸ã‚¨ãƒ©ãƒ¼:', error);
  }
};
*/

// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã‚’å–å¾—
export const getUserClaims = async () => {
  const user = auth.currentUser;
  if (!user) return null;

  try {
    const idTokenResult = await user.getIdTokenResult();
    return idTokenResult.claims;
  } catch (error) {
    console.error('ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
    return null;
  }
};
</code></pre>
<h3 id="2-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–">2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–</h3>
<pre><code class="language-javascript">// ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ã®ãŸã‚ã®å®Ÿè£…ä¾‹
import { 
  reauthenticateWithCredential, 
  updatePassword,
  deleteUser 
} from 'firebase/auth';

// å†èªè¨¼
export const reauthenticateUser = async (credential) => {
  try {
    const user = auth.currentUser;
    if (!user) throw new Error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');

    await reauthenticateWithCredential(user, credential);
    return { success: true };
  } catch (error) {
    console.error('å†èªè¨¼ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: error.message };
  }
};

// ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ï¼ˆå†èªè¨¼ãŒå¿…è¦ï¼‰
export const changePassword = async (currentPassword, newPassword) => {
  try {
    const user = auth.currentUser;
    if (!user || !user.email) {
      throw new Error('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿å¯¾å¿œ');
    }

    // ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§å†èªè¨¼
    const credential = EmailAuthProvider.credential(user.email, currentPassword);
    await reauthenticateWithCredential(user, credential);

    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ›´æ–°
    await updatePassword(user, newPassword);
    
    console.log('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æˆåŠŸ');
    return { success: true };
  } catch (error) {
    console.error('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: error.message };
  }
};

// ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’è€ƒæ…®ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤
export const deleteUserAccount = async (password) => {
  try {
    const user = auth.currentUser;
    if (!user) throw new Error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');

    // ãƒ¡ãƒ¼ãƒ«èªè¨¼ã®å ´åˆã¯å†èªè¨¼
    if (user.email &#x26;&#x26; password) {
      const credential = EmailAuthProvider.credential(user.email, password);
      await reauthenticateWithCredential(user, credential);
    }

    await deleteUser(user);
    console.log('ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤æˆåŠŸ');
    return { success: true };
  } catch (error) {
    console.error('ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ã‚¨ãƒ©ãƒ¼:', error);
    return { success: false, error: error.message };
  }
};
</code></pre>
<h2 id="ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ³•">ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ³•</h2>
<h3 id="1-èªè¨¼ã‚¨ãƒ©ãƒ¼ã®åŒ…æ‹¬çš„ãªå‡¦ç†">1. èªè¨¼ã‚¨ãƒ©ãƒ¼ã®åŒ…æ‹¬çš„ãªå‡¦ç†</h3>
<pre><code class="language-javascript">// çµ±ä¸€çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
export const handleAuthError = (error) => {
  console.error('Firebaseèªè¨¼ã‚¨ãƒ©ãƒ¼:', error);

  const errorMessages = {
    // ãƒ¡ãƒ¼ãƒ«èªè¨¼é–¢é€£
    'auth/email-already-in-use': 'ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™',
    'auth/invalid-email': 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“',
    'auth/weak-password': 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šã§è¨­å®šã—ã¦ãã ã•ã„',
    'auth/user-not-found': 'ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“',
    'auth/wrong-password': 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™',
    
    // ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³é–¢é€£
    'auth/account-exists-with-different-credential': 'åˆ¥ã®èªè¨¼æ–¹æ³•ã§æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™',
    'auth/popup-blocked': 'ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™',
    'auth/popup-closed-by-user': 'ãƒ­ã‚°ã‚¤ãƒ³ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ',
    'auth/cancelled-popup-request': 'ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ',
    
    // é›»è©±ç•ªå·èªè¨¼é–¢é€£
    'auth/invalid-phone-number': 'é›»è©±ç•ªå·ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“',
    'auth/invalid-verification-code': 'èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“',
    'auth/code-expired': 'èªè¨¼ã‚³ãƒ¼ãƒ‰ã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã¾ã™',
    
    // ä¸€èˆ¬çš„ãªã‚¨ãƒ©ãƒ¼
    'auth/network-request-failed': 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',
    'auth/too-many-requests': 'ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¤šã™ãã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„',
    'auth/user-disabled': 'ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™',
    'auth/requires-recent-login': 'å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã‹ã‚‰æ“ä½œã—ã¦ãã ã•ã„'
  };

  return errorMessages[error.code] || `èªè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}`;
};
</code></pre>
<h3 id="2-ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–">2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</h3>
<pre><code class="language-javascript">// èªè¨¼çŠ¶æ…‹ã®åŠ¹ç‡çš„ãªç®¡ç†
import { useEffect, useState, useCallback } from 'react';
import { onAuthStateChanged } from 'firebase/auth';
import { auth } from './firebase-config';

export const useAuthOptimized = () => {
  const [authState, setAuthState] = useState({
    user: null,
    loading: true,
    initialized: false
  });

  // ãƒ¡ãƒ¢åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
  const updateAuthState = useCallback((user) => {
    setAuthState({
      user,
      loading: false,
      initialized: true
    });
  }, []);

  useEffect(() => {
    // èªè¨¼çŠ¶æ…‹ã®ç›£è¦–ã‚’ä¸€åº¦ã ã‘è¨­å®š
    const unsubscribe = onAuthStateChanged(auth, updateAuthState);
    
    return unsubscribe;
  }, [updateAuthState]);

  return authState;
};

// ãƒˆãƒ¼ã‚¯ãƒ³ã®åŠ¹ç‡çš„ãªç®¡ç†
export const useAuthToken = () => {
  const [token, setToken] = useState(null);
  const [tokenLoading, setTokenLoading] = useState(true);

  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, async (user) => {
      if (user) {
        try {
          const idToken = await user.getIdToken();
          setToken(idToken);
        } catch (error) {
          console.error('ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
          setToken(null);
        }
      } else {
        setToken(null);
      }
      setTokenLoading(false);
    });

    return unsubscribe;
  }, []);

  return { token, tokenLoading };
};
</code></pre>
<h3 id="3-ãƒ‡ãƒãƒƒã‚°ã¨ãƒ†ã‚¹ãƒˆ">3. ãƒ‡ãƒãƒƒã‚°ã¨ãƒ†ã‚¹ãƒˆ</h3>
<pre><code class="language-javascript">// é–‹ç™ºç’°å¢ƒã§ã®ãƒ‡ãƒãƒƒã‚°æ”¯æ´
export const debugAuth = () => {
  if (process.env.NODE_ENV !== 'development') return;

  const user = auth.currentUser;
  
  console.group('Firebaseèªè¨¼ãƒ‡ãƒãƒƒã‚°æƒ…å ±');
  console.log('ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼:', user);
  
  if (user) {
    console.log('UID:', user.uid);
    console.log('ãƒ¡ãƒ¼ãƒ«:', user.email);
    console.log('è¡¨ç¤ºå:', user.displayName);
    console.log('é›»è©±ç•ªå·:', user.phoneNumber);
    console.log('ãƒ¡ãƒ¼ãƒ«ç¢ºèªæ¸ˆã¿:', user.emailVerified);
    console.log('èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼:', user.providerData);
    console.log('ä½œæˆæ—¥æ™‚:', user.metadata.creationTime);
    console.log('æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³:', user.metadata.lastSignInTime);
  } else {
    console.log('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“');
  }
  
  console.groupEnd();
};

// ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯é–¢æ•°
export const createMockUser = (overrides = {}) => {
  return {
    uid: 'mock-uid',
    email: 'test@example.com',
    displayName: 'Test User',
    phoneNumber: null,
    emailVerified: true,
    providerData: [],
    metadata: {
      creationTime: new Date().toISOString(),
      lastSignInTime: new Date().toISOString()
    },
    ...overrides
  };
};
</code></pre>
<h2 id="å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹å®Œå…¨ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ">å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹ï¼šå®Œå…¨ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ </h2>
<p>å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ãˆã‚‹ã€åŒ…æ‹¬çš„ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ä¾‹ï¼š</p>
<pre><code class="language-jsx">// hooks/useFirebaseAuth.js
import { useState, useEffect, useCallback } from 'react';
import { 
  onAuthStateChanged, 
  signOut 
} from 'firebase/auth';
import { auth } from '../firebase-config';
import { 
  signIn, 
  signUp, 
  signInWithGooglePopup,
  signInWithGithub,
  resetPassword 
} from '../services/auth-service';

export const useFirebaseAuth = () => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // èªè¨¼çŠ¶æ…‹ã®ç›£è¦–
  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, (user) => {
      setUser(user);
      setLoading(false);
    });

    return unsubscribe;
  }, []);

  // ã‚¨ãƒ©ãƒ¼ã‚’ã‚¯ãƒªã‚¢
  const clearError = useCallback(() => {
    setError(null);
  }, []);

  // å…±é€šã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  const handleAuthAction = useCallback(async (authFunction, ...args) => {
    setLoading(true);
    setError(null);

    try {
      const result = await authFunction(...args);
      if (!result.success) {
        setError(result.error);
      }
      return result;
    } catch (err) {
      setError('äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
      return { success: false, error: err.message };
    } finally {
      setLoading(false);
    }
  }, []);

  // èªè¨¼ãƒ¡ã‚½ãƒƒãƒ‰
  const login = useCallback((email, password) => 
    handleAuthAction(signIn, email, password), [handleAuthAction]);

  const register = useCallback((email, password, displayName) => 
    handleAuthAction(signUp, email, password, displayName), [handleAuthAction]);

  const googleLogin = useCallback(() => 
    handleAuthAction(signInWithGooglePopup), [handleAuthAction]);

  const githubLogin = useCallback(() => 
    handleAuthAction(signInWithGithub), [handleAuthAction]);

  const forgotPassword = useCallback((email) => 
    handleAuthAction(resetPassword, email), [handleAuthAction]);

  const logout = useCallback(async () => {
    setLoading(true);
    try {
      await signOut(auth);
      setUser(null);
      setError(null);
    } catch (err) {
      setError('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setLoading(false);
    }
  }, []);

  return {
    user,
    loading,
    error,
    isAuthenticated: !!user,
    login,
    register,
    googleLogin,
    githubLogin,
    forgotPassword,
    logout,
    clearError
  };
};

// components/AuthProvider.jsx
import React, { createContext, useContext } from 'react';
import { useFirebaseAuth } from '../hooks/useFirebaseAuth';

const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  const auth = useFirebaseAuth();
  
  return (
    &#x3C;AuthContext.Provider value={auth}>
      {children}
    &#x3C;/AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuthã¯AuthProviderå†…ã§ä½¿ç”¨ã—ã¦ãã ã•ã„');
  }
  return context;
};

// components/CompleteAuthForm.jsx
import React, { useState } from 'react';
import { useAuth } from './AuthProvider';

const CompleteAuthForm = () => {
  const [mode, setMode] = useState('login'); // 'login', 'register', 'forgot'
  const [formData, setFormData] = useState({
    email: '',
    password: '',
    displayName: ''
  });

  const { 
    login, 
    register, 
    googleLogin, 
    githubLogin, 
    forgotPassword, 
    loading, 
    error, 
    clearError 
  } = useAuth();

  const handleSubmit = async (e) => {
    e.preventDefault();
    clearError();

    switch (mode) {
      case 'login':
        await login(formData.email, formData.password);
        break;
      case 'register':
        await register(formData.email, formData.password, formData.displayName);
        break;
      case 'forgot':
        const result = await forgotPassword(formData.email);
        if (result.success) {
          alert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸ');
          setMode('login');
        }
        break;
    }
  };

  const handleInputChange = (field, value) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
  };

  const renderForm = () => {
    switch (mode) {
      case 'login':
        return (
          &#x3C;div>
            &#x3C;h2>ãƒ­ã‚°ã‚¤ãƒ³&#x3C;/h2>
            &#x3C;form onSubmit={handleSubmit}>
              &#x3C;input
                type="email"
                placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
                value={formData.email}
                onChange={(e) => handleInputChange('email', e.target.value)}
                required
              />
              &#x3C;input
                type="password"
                placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"
                value={formData.password}
                onChange={(e) => handleInputChange('password', e.target.value)}
                required
              />
              &#x3C;button type="submit" disabled={loading}>
                {loading ? 'ãƒ­ã‚°ã‚¤ãƒ³ä¸­...' : 'ãƒ­ã‚°ã‚¤ãƒ³'}
              &#x3C;/button>
            &#x3C;/form>
            &#x3C;button type="button" onClick={() => setMode('register')}>
              æ–°è¦ç™»éŒ²
            &#x3C;/button>
            &#x3C;button type="button" onClick={() => setMode('forgot')}>
              ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚ŒãŸ
            &#x3C;/button>
          &#x3C;/div>
        );

      case 'register':
        return (
          &#x3C;div>
            &#x3C;h2>æ–°è¦ç™»éŒ²&#x3C;/h2>
            &#x3C;form onSubmit={handleSubmit}>
              &#x3C;input
                type="text"
                placeholder="è¡¨ç¤ºå"
                value={formData.displayName}
                onChange={(e) => handleInputChange('displayName', e.target.value)}
              />
              &#x3C;input
                type="email"
                placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
                value={formData.email}
                onChange={(e) => handleInputChange('email', e.target.value)}
                required
              />
              &#x3C;input
                type="password"
                placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ6æ–‡å­—ä»¥ä¸Šï¼‰"
                value={formData.password}
                onChange={(e) => handleInputChange('password', e.target.value)}
                required
              />
              &#x3C;button type="submit" disabled={loading}>
                {loading ? 'ç™»éŒ²ä¸­...' : 'ç™»éŒ²'}
              &#x3C;/button>
            &#x3C;/form>
            &#x3C;button type="button" onClick={() => setMode('login')}>
              ãƒ­ã‚°ã‚¤ãƒ³ã«æˆ»ã‚‹
            &#x3C;/button>
          &#x3C;/div>
        );

      case 'forgot':
        return (
          &#x3C;div>
            &#x3C;h2>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ&#x3C;/h2>
            &#x3C;form onSubmit={handleSubmit}>
              &#x3C;input
                type="email"
                placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
                value={formData.email}
                onChange={(e) => handleInputChange('email', e.target.value)}
                required
              />
              &#x3C;button type="submit" disabled={loading}>
                {loading ? 'é€ä¿¡ä¸­...' : 'ãƒªã‚»ãƒƒãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡'}
              &#x3C;/button>
            &#x3C;/form>
            &#x3C;button type="button" onClick={() => setMode('login')}>
              ãƒ­ã‚°ã‚¤ãƒ³ã«æˆ»ã‚‹
            &#x3C;/button>
          &#x3C;/div>
        );
    }
  };

  return (
    &#x3C;div className="auth-form">
      {renderForm()}
      
      &#x3C;div className="social-auth">
        &#x3C;h3>ã¾ãŸã¯ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³&#x3C;/h3>
        &#x3C;button onClick={googleLogin} disabled={loading}>
          Googleã§ãƒ­ã‚°ã‚¤ãƒ³
        &#x3C;/button>
        &#x3C;button onClick={githubLogin} disabled={loading}>
          GitHubã§ãƒ­ã‚°ã‚¤ãƒ³
        &#x3C;/button>
      &#x3C;/div>

      {error &#x26;&#x26; (
        &#x3C;div className="error-message">
          &#x3C;p>{error}&#x3C;/p>
          &#x3C;button onClick={clearError}>é–‰ã˜ã‚‹&#x3C;/button>
        &#x3C;/div>
      )}
    &#x3C;/div>
  );
};

export default CompleteAuthForm;
</code></pre>
<h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h2>
<h3 id="firebaseèªè¨¼ã®ä¸»è¦ãªãƒã‚¤ãƒ³ãƒˆ">Firebaseèªè¨¼ã®ä¸»è¦ãªãƒã‚¤ãƒ³ãƒˆ</h3>
<ol>
<li><strong>è±Šå¯Œãªèªè¨¼æ–¹å¼</strong>: ãƒ¡ãƒ¼ãƒ«ã€SNSã€é›»è©±ç•ªå·ãªã©å¤šæ§˜ãªé¸æŠè‚¢</li>
<li><strong>ç°¡å˜ãªå®Ÿè£…</strong>: æ•°è¡Œã®ã‚³ãƒ¼ãƒ‰ã§é«˜æ©Ÿèƒ½ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰</li>
<li><strong>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ</strong>: èªè¨¼çŠ¶æ…‹ã®è‡ªå‹•ç›£è¦–ã¨æ›´æ–°</li>
<li><strong>é«˜ã„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</strong>: æ¥­ç•Œæ¨™æº–ã®æš—å·åŒ–ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½</li>
<li><strong>ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </strong>: Webã€iOSã€Androidã§çµ±ä¸€</li>
</ol>
<h3 id="ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹">ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h3>
<ul>
<li>âœ… <strong>é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å‘ä¸Š</li>
<li>âœ… <strong>èªè¨¼çŠ¶æ…‹ã®åŠ¹ç‡çš„ãªç®¡ç†</strong>ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–</li>
<li>âœ… <strong>Security Rules</strong>ã§ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶å¾¡</li>
<li>âœ… <strong>å†èªè¨¼</strong>ã§ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªæ“ä½œã‚’ä¿è­·</li>
<li>âœ… <strong>ãƒ†ã‚¹ãƒˆç’°å¢ƒ</strong>ã§é–‹ç™ºåŠ¹ç‡ã‚’å‘ä¸Š</li>
</ul>
<h3 id="æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
<ol>
<li><strong>å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å°å…¥</strong>ã—ã¦ã¿ã‚‹</li>
<li><strong>Firebase Security Rules</strong>ã‚’å­¦ç¿’ã™ã‚‹</li>
<li><strong>Firestore/Realtime Database</strong>ã¨ã®é€£æºã‚’ç†è§£ã™ã‚‹</li>
<li><strong>Firebase Cloud Functions</strong>ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å‡¦ç†ã‚’å®Ÿè£…</li>
<li><strong>Analytics</strong>ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ã‚’åˆ†æ</li>
</ol>
<p>Firebaseèªè¨¼ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¦ã€å®‰å…¨ã§ä½¿ã„ã‚„ã™ã„Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¾ã—ã‚‡ã†ï¼</p>
<h2 id="å‚è€ƒãƒªãƒ³ã‚¯">å‚è€ƒãƒªãƒ³ã‚¯</h2>
<h3 id="firebaseå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ">Firebaseå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h3>
<ul>
<li><a href="https://firebase.google.com/docs/auth">Firebase Authentication å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="https://firebase.google.com/docs/auth/web/start">Firebase JavaScript SDK èªè¨¼ã‚¬ã‚¤ãƒ‰</a></li>
<li><a href="https://firebase.google.com/docs/web/setup">Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‚¬ã‚¤ãƒ‰</a></li>
<li><a href="https://firebase.google.com/docs/rules">Firebase Security Rules</a></li>
<li><a href="https://firebase.google.com/docs/auth/web/account-linking">ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒªãƒ³ã‚¯</a></li>
</ul>
<h3 id="èªè¨¼æ–¹å¼åˆ¥ã®è©³ç´°ã‚¬ã‚¤ãƒ‰">èªè¨¼æ–¹å¼åˆ¥ã®è©³ç´°ã‚¬ã‚¤ãƒ‰</h3>
<ul>
<li><a href="https://firebase.google.com/docs/auth/web/google-signin">Googleèªè¨¼ã®è¨­å®š</a></li>
<li><a href="https://firebase.google.com/docs/auth/web/github-auth">GitHubèªè¨¼ã®è¨­å®š</a></li>
<li><a href="https://firebase.google.com/docs/auth/web/phone-auth">é›»è©±ç•ªå·èªè¨¼ã®å®Ÿè£…</a></li>
</ul>
<h3 id="é–¢é€£æŠ€è¡“">é–¢é€£æŠ€è¡“</h3>
<ul>
<li><a href="https://react.dev/">Reactå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="https://vuejs.org/">Vue.jså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="https://oauth.net/2/">OAuth 2.0 è§£èª¬</a></li>
<li><a href="https://jwt.io/">JSON Web Tokens (JWT)</a></li>
</ul>4:["$","div",null,{"className":"max-w-2xl mx-auto py-10 px-4","children":[["$","h1",null,{"className":"text-3xl font-bold mb-2","children":[["$","span",null,{"className":"text-green-600","children":["#",50]}]," ","Firebaseèªè¨¼å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼šåˆå¿ƒè€…ã‹ã‚‰ãƒŸãƒ‰ãƒ«ã‚¯ãƒ©ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¾ã§"]}],["$","ul",null,{"className":"list-none border-b border-gray-600 pb-4 mb-6","children":[["$","li",null,{"className":"text-gray-500 text-sm","children":["ä½œæˆæ—¥æ™‚: ","2025-09-10 22:46"]}],["$","li",null,{"className":"text-gray-500 text-sm","children":["æ›´æ–°æ—¥æ™‚: ","2025-09-10 22:46"]}],["$","li",null,{"className":"flex flex-wrap gap-2 mt-2","children":[["$","span","0",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"Firebase"}],["$","span","1",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"Authentication"}],["$","span","2",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"JavaScript"}],["$","span","3",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"React"}],["$","span","4",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"Web Development"}],["$","span","5",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"Security"}],["$","span","6",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"OAuth"}]]}]]}],["$","nav",null,{"className":"mb-6 pb-4 border-b border-gray-700 flex justify-between","children":[["$","$L12",null,{"href":"/","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"â† ãƒ›ãƒ¼ãƒ ã¸"}],["$","$L12",null,{"href":"/blog","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"è¨˜äº‹ä¸€è¦§ã¸ â†’"}]]}],["$","article",null,{"className":"prose dark:prose-invert","dangerouslySetInnerHTML":{"__html":"$13"}}],["$","$L14",null,{}],["$","nav",null,{"className":"mt-8 pt-4 border-t border-gray-700 flex justify-between","children":[["$","$L12",null,{"href":"/","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"â† ãƒ›ãƒ¼ãƒ ã¸"}],["$","$L12",null,{"href":"/blog","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"è¨˜äº‹ä¸€è¦§ã¸ â†’"}]]}],["$","$L15",null,{}]]}]
d:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:null
11:{"metadata":[["$","title","0",{"children":"Maita Tomoya Dev IO"}],["$","meta","1",{"name":"description","content":"ç±³ç”°æ™ºå“‰ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã€‚ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã—ãŸã“ã¨ã‚’ãƒ¡ãƒ¢ã—ã¾ã™ã€‚"}]],"error":null,"digest":"$undefined"}
b:{"metadata":"$11:metadata","error":null,"digest":"$undefined"}
