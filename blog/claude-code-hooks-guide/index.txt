1:"$Sreact.fragment"
2:I[87555,[],""]
3:I[31295,[],""]
5:I[59665,[],"MetadataBoundary"]
7:I[59665,[],"OutletBoundary"]
a:I[74911,[],"AsyncMetadataOutlet"]
c:I[59665,[],"ViewportBoundary"]
e:I[26614,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/19bdf9af4d1ae4d4.css","style"]
0:{"P":null,"b":"KZrMisSdXyu7FDjuS9HOy","p":"","c":["","blog","claude-code-hooks-guide",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","claude-code-hooks-guide","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/19bdf9af4d1ae4d4.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":[["$","head",null,{"children":["$","link",null,{"rel":"icon","href":"/favicon.png","type":"image/png"}]}],["$","body",null,{"className":"__variable_5cfdac __variable_9a8899 antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","claude-code-hooks-guide","d"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L4",["$","$L5",null,{"children":"$L6"}],null,["$","$L7",null,{"children":["$L8","$L9",["$","$La",null,{"promise":"$@b"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","TXrwif3coNm4Q_fVJNGwJ",{"children":[["$","$Lc",null,{"children":"$Ld"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],null]}],false]],"m":"$undefined","G":["$e","$undefined"],"s":false,"S":true}
f:"$Sreact.suspense"
10:I[74911,[],"AsyncMetadata"]
6:["$","$f",null,{"fallback":null,"children":["$","$L10",null,{"promise":"$@11"}]}]
9:null
12:I[6874,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],""]
14:I[31203,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],"default"]
15:I[4197,["6874","static/chunks/6874-6c1ddde525f3893c.js","5953","static/chunks/app/blog/%5Bslug%5D/page-26397bcee018c1a3.js"],"default"]
13:T8033,<p>Claude Codeã§ä½œæ¥­ã—ã¦ã„ã¦ã€ã€Œã‚³ãƒ¼ãƒ‰ä¿å­˜æ™‚ã«è‡ªå‹•ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ãŸã„ã€ã€Œã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã«é€šçŸ¥ãŒæ¬²ã—ã„ã€ã¨æ€ã£ãŸã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼ŸHooksæ©Ÿèƒ½ã‚’ä½¿ãˆã°ã€ã“ã‚Œã‚‰ã®è‡ªå‹•åŒ–ãŒç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ã€‚</p>
<h2 id="ã“ã®è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨">ã“ã®è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨</h2>
<ul>
<li>ğŸ”° <strong>åˆç´š</strong>: Hooksã®åŸºæœ¬æ¦‚å¿µã¨æœ€åˆã®è¨­å®š</li>
<li>ğŸ”¥ <strong>ä¸­ç´š</strong>: 8ç¨®é¡ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã¨å®Ÿè·µçš„ãªè‡ªå‹•åŒ–</li>
<li>ğŸ’€ <strong>ä¸Šç´š</strong>: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</li>
</ul>
<h2 id="5åˆ†ã§è©¦ã›ã‚‹ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ-">5åˆ†ã§è©¦ã›ã‚‹ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ ğŸš€</h2>
<p>ã¾ãšã¯å‹•ãä¾‹ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
<h3 id="1-ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ30ç§’">1. ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆï¼ˆ30ç§’ï¼‰</h3>
<pre><code class="language-bash">mkdir -p ~/.claude/hooks
</code></pre>
<h3 id="2-ç°¡å˜ãªhookã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ1åˆ†">2. ç°¡å˜ãªHookã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆï¼ˆ1åˆ†ï¼‰</h3>
<pre><code class="language-bash">cat > ~/.claude/hooks/hello.sh &#x3C;&#x3C; 'EOF'
#!/bin/bash
echo "ğŸ‰ Hook is working!" >&#x26;2
cat  # å…¥åŠ›ã‚’ãã®ã¾ã¾å‡ºåŠ›ï¼ˆé‡è¦ï¼ï¼‰
EOF

chmod +x ~/.claude/hooks/hello.sh
</code></pre>
<h3 id="3-è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ1åˆ†">3. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆ1åˆ†ï¼‰</h3>
<pre><code class="language-bash">cat > ~/.claude/settings.json &#x3C;&#x3C; 'EOF'
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {"type": "command", "command": "~/.claude/hooks/hello.sh"}
        ]
      }
    ]
  }
}
EOF
</code></pre>
<h3 id="4-å‹•ä½œç¢ºèª30ç§’">4. å‹•ä½œç¢ºèªï¼ˆ30ç§’ï¼‰</h3>
<p>Claude Codeã§ä½•ã‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã ã‚Šã€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ŒğŸ‰ Hook is working!ã€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼</p>
<p><strong>æˆåŠŸã—ãŸã‚‰</strong>: ä¸‹è¨˜ã®è©³ç´°ãªèª¬æ˜ã«é€²ã¿ã¾ã—ã‚‡ã†
<strong>ã†ã¾ãã„ã‹ãªã„å ´åˆ</strong>: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§</p>
<h2 id="å‰æçŸ¥è­˜">å‰æçŸ¥è­˜</h2>
<p>ã“ã®è¨˜äº‹ã‚’èª­ã‚€ã«ã¯ã€ä»¥ä¸‹ã®åŸºæœ¬çš„ãªçŸ¥è­˜ãŒã‚ã‚‹ã¨ã‚¹ãƒ ãƒ¼ã‚ºã§ã™ï¼š</p>
<ul>
<li>åŸºæœ¬çš„ãªã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ï¼ˆ<code>cd</code>, <code>ls</code>, <code>echo</code>, <code>cat</code>ãªã©ï¼‰</li>
<li>ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè¡Œæ¨©é™ï¼‰ã®æ¦‚å¿µ</li>
<li>JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®åŸºæœ¬</li>
</ul>
<h2 id="ã¯ã˜ã‚ã«hooksã¨ã¯ä½•ã‹">ã¯ã˜ã‚ã«ï¼šHooksã¨ã¯ä½•ã‹ï¼Ÿ</h2>
<p>Hooksï¼ˆãƒ•ãƒƒã‚¯ï¼‰ã¯ã€ç‰¹å®šã®ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã¨ãã«è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ã‚³ãƒãƒ³ãƒ‰ã®ã“ã¨ã§ã™ã€‚é‡£ã‚Šé‡ï¼ˆhookï¼‰ã®ã‚ˆã†ã«ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã€Œå¼•ã£æ›ã‘ã¦ã€å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p>
<h3 id="èº«è¿‘ãªä¾‹ã§ç†è§£ã™ã‚‹hooks">èº«è¿‘ãªä¾‹ã§ç†è§£ã™ã‚‹Hooks</h3>
<ul>
<li><strong>Gitã®ãƒ•ãƒƒã‚¯</strong>: ã‚³ãƒŸãƒƒãƒˆå‰ã«ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•å®Ÿè¡Œ</li>
<li><strong>Webãƒ•ãƒƒã‚¯</strong>: GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸã‚‰Slackã«é€šçŸ¥</li>
<li><strong>Claude Code Hooks</strong>: AIãŒãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†å‰å¾Œã«ç‹¬è‡ªã®å‡¦ç†ã‚’æŒ¿å…¥</li>
</ul>
<h2 id="claude-code-hooksã®3ã¤ã®ç¨®é¡">Claude Code Hooksã®3ã¤ã®ç¨®é¡</h2>
<p>Claude Codeã«ã¯ã€ä¸»ã«3ç¨®é¡ã®HooksãŒã‚ã‚Šã¾ã™ï¼š</p>
<h3 id="å‡¦ç†ã®æµã‚Œå›³">å‡¦ç†ã®æµã‚Œå›³</h3>
<pre><code>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›
    â†“
[1. user-prompt-submit-hook] â† ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ‹¡å¼µ
    â†“
Claude CodeãŒå‡¦ç†
    â†“
ãƒ„ãƒ¼ãƒ«å®Ÿè¡ŒãŒå¿…è¦ãªå ´åˆ
    â†“
[2. tool-pre-hook] â† å±é™ºãªæ“ä½œã‚’ãƒã‚§ãƒƒã‚¯
    â†“
ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ã€ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãªã©ï¼‰
    â†“
[3. tool-post-hook] â† çµæœã‚’ãƒ­ã‚°ã«è¨˜éŒ²
    â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®è¿”ä¿¡
</code></pre>
<h3 id="1-user-prompt-submit-hook">1. user-prompt-submit-hook</h3>
<p><strong>ã„ã¤å‹•ãï¼Ÿ</strong>: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡ã™ã‚‹ç›´å‰</p>
<p><strong>ä½•ãŒã§ãã‚‹ï¼Ÿ</strong>: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å†…å®¹ã‚’è‡ªå‹•çš„ã«æ‹¡å¼µãƒ»ä¿®æ­£</p>
<p><strong>å¤±æ•—ã—ãŸå ´åˆ</strong>: ã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–ã•ã‚Œã€å…ƒã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒé€ä¿¡ã•ã‚Œã‚‹</p>
<h3 id="2-tool-pre-hook">2. tool-pre-hook</h3>
<p><strong>ã„ã¤å‹•ãï¼Ÿ</strong>: Claude CodeãŒãƒ„ãƒ¼ãƒ«ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ã€ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãªã©ï¼‰ã‚’ä½¿ã†ç›´å‰</p>
<p><strong>ä½•ãŒã§ãã‚‹ï¼Ÿ</strong>: å±é™ºãªæ“ä½œã‚’ãƒ–ãƒ­ãƒƒã‚¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¿®æ­£</p>
<p><strong>å¤±æ•—ã—ãŸå ´åˆ</strong>: çµ‚äº†ã‚³ãƒ¼ãƒ‰0ä»¥å¤–ã§ãƒ„ãƒ¼ãƒ«å®Ÿè¡ŒãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã‚‹</p>
<h3 id="3-tool-post-hook">3. tool-post-hook</h3>
<p><strong>ã„ã¤å‹•ãï¼Ÿ</strong>: ãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡ŒãŒå®Œäº†ã—ãŸç›´å¾Œ</p>
<p><strong>ä½•ãŒã§ãã‚‹ï¼Ÿ</strong>: å®Ÿè¡Œçµæœã®ãƒ­ã‚°è¨˜éŒ²ã€å¾Œå‡¦ç†ã®å®Ÿè¡Œ</p>
<p><strong>å¤±æ•—ã—ãŸå ´åˆ</strong>: ã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–ã•ã‚Œã€Claude Codeã®å‡¦ç†ã¯ç¶™ç¶šã•ã‚Œã‚‹</p>
<h2 id="å®Ÿè£…æ‰‹é †ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹hooksè¨­å®š">å®Ÿè£…æ‰‹é †ï¼šã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹Hooksè¨­å®š</h2>
<h3 id="ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã®é•ã„">ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã®é•ã„</h3>
<h4 id="ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é©ç”¨">ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šï¼ˆã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é©ç”¨ï¼‰</h4>
<ul>
<li><strong>è¨­å®šå ´æ‰€</strong>: <code>~/.claude/settings.json</code></li>
<li><strong>ç”¨é€”</strong>: ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å…±é€šã—ã¦ä½¿ã„ãŸã„Hooks</li>
<li><strong>ä¾‹</strong>: ã‚¿ã‚¹ã‚¯å®Œäº†é€šçŸ¥ã€å±é™ºã‚³ãƒãƒ³ãƒ‰ã®ãƒ–ãƒ­ãƒƒã‚¯</li>
</ul>
<h4 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šç‰¹å®šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆç‰¹å®šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ï¼‰</h4>
<ul>
<li><strong>è¨­å®šå ´æ‰€</strong>: <code>{ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ}/.claude/settings.json</code></li>
<li><strong>ç”¨é€”</strong>: ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®Hooks</li>
<li><strong>ä¾‹</strong>: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</li>
</ul>
<h3 id="ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ä¾‹">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ä¾‹</h3>
<pre><code># ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã®å ´åˆ
~/
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ settings.json          # ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ hooks/                 # ã‚°ãƒ­ãƒ¼ãƒãƒ«Hooksã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚       â”œâ”€â”€ prompt-enhancer.sh
â”‚       â”œâ”€â”€ safety-check.sh
â”‚       â””â”€â”€ logger.sh

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã®å ´åˆ
my-project/
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ settings.json          # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ hooks/                 # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆHooksã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚       â”œâ”€â”€ format-code.sh
â”‚       â””â”€â”€ run-tests.sh
â”œâ”€â”€ src/
â”œâ”€â”€ package.json
â””â”€â”€ README.md
</code></pre>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—1-è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ">ã‚¹ãƒ†ãƒƒãƒ—1: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ</h3>
<p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«<code>.claude</code>ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€<code>settings.json</code>ã‚’é…ç½®ã—ã¾ã™ï¼š</p>
<pre><code class="language-bash"># ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã®å ´åˆ
mkdir -p .claude/hooks
touch .claude/settings.json

# ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã®å ´åˆ
mkdir -p ~/.claude/hooks
touch ~/.claude/settings.json
</code></pre>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—2-åŸºæœ¬çš„ãªè¨­å®šã®è¨˜è¿°">ã‚¹ãƒ†ãƒƒãƒ—2: åŸºæœ¬çš„ãªè¨­å®šã®è¨˜è¿°</h3>
<p><code>.claude/settings.json</code>ã«ä»¥ä¸‹ã®å†…å®¹ã‚’è¨˜è¿°ï¼š</p>
<pre><code class="language-json">{
  "hooks": {
    "UserPromptSubmit": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "~/my-hooks/prompt-enhancer.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "~/my-hooks/bash-safety-check.sh"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "~/my-hooks/file-safety-check.sh"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "~/my-hooks/logger.sh"
          }
        ]
      }
    ]
  }
}
</code></pre>
<p><strong>æ³¨æ„</strong>: ãƒ‘ã‚¹ã¯<code>settings.json</code>ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã§æŒ‡å®šã—ã¾ã™ã€‚</p>
<h3 id="è¤‡æ•°ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’åŒã˜hookã«ç™»éŒ²ã™ã‚‹æ–¹æ³•">è¤‡æ•°ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’åŒã˜Hookã«ç™»éŒ²ã™ã‚‹æ–¹æ³•</h3>
<p>Claude Code Hooksã«ã¯<strong>æ–°æ—§2ã¤ã®è¨­å®šå½¢å¼</strong>ãŒã‚ã‚Šã€æ–°ã—ã„å½¢å¼ã§ã¯è¤‡æ•°ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç™»éŒ²ã§ãã¾ã™ã€‚</p>
<h4 id="æ–°ã—ã„å½¢å¼æ¨å¥¨---è¤‡æ•°ã‚¹ã‚¯ãƒªãƒ—ãƒˆå¯¾å¿œ">æ–°ã—ã„å½¢å¼ï¼ˆæ¨å¥¨ï¼‰ - è¤‡æ•°ã‚¹ã‚¯ãƒªãƒ—ãƒˆå¯¾å¿œ</h4>
<p><strong>ç‰¹å¾´</strong>ï¼š</p>
<ul>
<li>ã‚¤ãƒ™ãƒ³ãƒˆå: <code>PreToolUse</code>ã€<code>PostToolUse</code>ã€<code>Notification</code>ã€<code>Stop</code></li>
<li>é…åˆ—å½¢å¼ã§è¤‡æ•°ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç™»éŒ²å¯èƒ½</li>
<li>matcherã§ãƒ„ãƒ¼ãƒ«ã‚’æŒ‡å®šå¯èƒ½</li>
</ul>
<pre><code class="language-json">{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "./hooks/format-code.sh"
          },
          {
            "type": "command",
            "command": "./hooks/validate-syntax.sh"
          },
          {
            "type": "command",
            "command": "./hooks/notify-changes.sh"
          }
        ]
      }
    ]
  }
}
</code></pre>
<p>ã“ã®è¨­å®šã§ã¯ã€Writeã€Editã€MultiEditãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œå¾Œã«3ã¤ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒé †ç•ªã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p>
<h4 id="æ—§ã„å½¢å¼å»ƒæ­¢äºˆå®š---å˜ä¸€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ã¿">æ—§ã„å½¢å¼ï¼ˆå»ƒæ­¢äºˆå®šï¼‰ - å˜ä¸€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ã¿</h4>
<p><strong>ç‰¹å¾´</strong>ï¼š</p>
<ul>
<li>ã‚¤ãƒ™ãƒ³ãƒˆå: <code>tool-post-hook</code>ã€<code>tool-pre-hook</code>ã€<code>user-prompt-submit-hook</code></li>
<li>1ã¤ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ‘ã‚¹ã®ã¿æŒ‡å®šå¯èƒ½</li>
</ul>
<pre><code class="language-json">{
  "hooks": {
    "tool-post-hook": "./hooks/single-script.sh"
  }
}
</code></pre>
<h4 id="æ—§å½¢å¼ã§è¤‡æ•°å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹æ–¹æ³•">æ—§å½¢å¼ã§è¤‡æ•°å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹æ–¹æ³•</h4>
<h5 id="æ–¹æ³•1-ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ">æ–¹æ³•1: ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ</h5>
<pre><code class="language-bash">#!/bin/bash
# å…¥åŠ›ã‚’å¤‰æ•°ã«ä¿å­˜ï¼ˆè¤‡æ•°ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä½¿ç”¨ã™ã‚‹ãŸã‚ï¼‰
input_data=$(cat)

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆ1: ãƒ­ã‚°è¨˜éŒ²
echo "$input_data" | ./hooks/logger.sh > /tmp/result1.txt

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆ2: é€šçŸ¥
echo "$input_data" | ./hooks/notifier.sh > /tmp/result2.txt

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆ3: ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿
result=$(echo "$input_data" | ./hooks/formatter.sh)

# æœ€å¾Œã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®çµæœã‚’è¿”ã™
echo "$result"
</code></pre>
<h5 id="æ–¹æ³•2-1ã¤ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¤‡æ•°ã®æ©Ÿèƒ½ã‚’çµ±åˆ">æ–¹æ³•2: 1ã¤ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¤‡æ•°ã®æ©Ÿèƒ½ã‚’çµ±åˆ</h5>
<pre><code class="language-bash">#!/bin/bash
input_data=$(cat)

# æ©Ÿèƒ½1: ãƒ­ã‚°è¨˜éŒ²
echo "$(date): $input_data" >> .claude/logs/activity.log

# æ©Ÿèƒ½2: å±é™ºã‚³ãƒãƒ³ãƒ‰ãƒã‚§ãƒƒã‚¯
if echo "$input_data" | grep -q "rm -rf"; then
    echo "å±é™ºãªã‚³ãƒãƒ³ãƒ‰ã‚’æ¤œå‡º" >&#x26;2
fi

# æ©Ÿèƒ½3: é€šçŸ¥
if echo "$input_data" | grep -q "completed"; then
    osascript -e 'display notification "ã‚¿ã‚¹ã‚¯å®Œäº†" with title "Claude Code"'
fi

# å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
echo "$input_data"
</code></pre>
<h3 id="æ–°å½¢å¼ã¸ã®ç§»è¡Œæ–¹æ³•">æ–°å½¢å¼ã¸ã®ç§»è¡Œæ–¹æ³•</h3>
<p>ç¾åœ¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ä¸­ã®æ—§å½¢å¼ã‚’æ–°å½¢å¼ã«ç§»è¡Œã™ã‚‹ä¾‹ï¼š</p>
<p><strong>æ—§å½¢å¼</strong>ï¼š</p>
<pre><code class="language-json">{
  "hooks": {
    "tool-post-hook": "./hooks/task-notifier.sh"
  }
}
</code></pre>
<p><strong>æ–°å½¢å¼</strong>ï¼š</p>
<pre><code class="language-json">{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "./hooks/task-notifier.sh"
          }
        ]
      }
    ]
  }
}
</code></pre>
<h3 id="matcherã®æŒ‡å®šæ–¹æ³•">Matcherã®æŒ‡å®šæ–¹æ³•</h3>
<p><strong>ç‰¹å®šã®ãƒ„ãƒ¼ãƒ«ã®ã¿</strong>ï¼š</p>
<pre><code class="language-json">"matcher": "Write"  // Writeãƒ„ãƒ¼ãƒ«ã®ã¿
"matcher": "Bash"   // Bashã‚³ãƒãƒ³ãƒ‰ã®ã¿
</code></pre>
<p><strong>è¤‡æ•°ãƒ„ãƒ¼ãƒ«</strong>ï¼š</p>
<pre><code class="language-json">"matcher": "Write|Edit|MultiEdit"  // ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ç³»
"matcher": "Read|Grep|LS"          // ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Šç³»
</code></pre>
<p><strong>å…¨ãƒ„ãƒ¼ãƒ«</strong>ï¼š</p>
<pre><code class="language-json">"matcher": "*"  // ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«
</code></pre>
<h3 id="ã‚°ãƒ­ãƒ¼ãƒãƒ«ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆhookã®ä½µç”¨">ã‚°ãƒ­ãƒ¼ãƒãƒ«ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆHookã®ä½µç”¨</h3>
<p>æ–°å½¢å¼ã§ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã®<strong>ä¸¡æ–¹ã®HookãŒå®Ÿè¡Œ</strong>ã•ã‚Œã¾ã™ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®é †åºã§èª­ã¿è¾¼ã¾ã‚Œã€ã™ã¹ã¦ã®ä¸€è‡´ã™ã‚‹ãƒ•ãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ï¼š</p>
<ol>
<li><strong>ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š</strong>: <code>~/.claude/settings.json</code></li>
<li><strong>ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®š</strong>: <code>~/.claude/settings.local.json</code></li>
<li><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š</strong>: <code>.claude/settings.json</code></li>
<li><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ã‚«ãƒ«è¨­å®š</strong>: <code>.claude/settings.local.json</code></li>
</ol>
<p><strong>ä¾‹</strong>: ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§æ±ç”¨çš„ãªãƒ­ã‚°ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å›ºæœ‰ã®é€šçŸ¥ã‚’è¨­å®š</p>
<pre><code class="language-json">// ~/.claude/settings.jsonï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼‰
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {"type": "command", "command": "~/.claude/hooks/global-logger.sh"}
        ]
      }
    ]
  }
}

// .claude/settings.jsonï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "TodoWrite",
        "hooks": [
          {"type": "command", "command": "./hooks/task-notifier.sh"}
        ]
      }
    ]
  }
}
</code></pre>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—3-hookã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ">ã‚¹ãƒ†ãƒƒãƒ—3: Hookã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ</h3>
<p>å„Hookã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’<code>.claude/hooks/</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œæˆã—ã¾ã™ã€‚</p>
<h2 id="å®Ÿè·µä¾‹1-ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè‡ªå‹•æ‹¡å¼µhook">å®Ÿè·µä¾‹1: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè‡ªå‹•æ‹¡å¼µHook</h2>
<p>ç¾åœ¨ã®Gitãƒ–ãƒ©ãƒ³ãƒåã‚„ã‚¿ã‚¹ã‚¯æƒ…å ±ã‚’è‡ªå‹•çš„ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è¿½åŠ ã™ã‚‹ä¾‹ã§ã™ã€‚</p>
<p><strong><code>hooks/prompt-enhancer.sh</code></strong>:</p>
<pre><code class="language-bash">#!/bin/bash
# ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡å‰ã«å®Ÿè¡Œã•ã‚Œã¾ã™

# å…ƒã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã¿è¾¼ã‚€
original_prompt=$(cat)

# ç¾åœ¨ã®Gitãƒ–ãƒ©ãƒ³ãƒã‚’å–å¾—ï¼ˆã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯"main"ã‚’ä½¿ç”¨ï¼‰
branch=$(git branch --show-current 2>/dev/null || echo "main")

# ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’å–å¾—
task_content=""
if [ -f ".tmp/task.md" ]; then
    task_content=$(cat .tmp/task.md)
fi

# æ‹¡å¼µã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›
# EOFã¾ã§ã®å†…å®¹ãŒãã®ã¾ã¾å‡ºåŠ›ã•ã‚Œã‚‹ï¼ˆãƒ’ã‚¢ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
cat &#x3C;&#x3C; EOF
=== ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ± ===
ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒ: $branch
${task_content:+ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯:
$task_content}
===================

$original_prompt
EOF
</code></pre>
<h3 id="ã“ã®hookãŒå—ã‘å–ã‚‹ãƒ‡ãƒ¼ã‚¿">ã“ã®HookãŒå—ã‘å–ã‚‹ãƒ‡ãƒ¼ã‚¿</h3>
<pre><code># æ¨™æº–å…¥åŠ›ã‹ã‚‰å—ã‘å–ã‚‹å†…å®¹ã®ä¾‹ï¼š
"ãƒã‚°ã‚’ä¿®æ­£ã—ã¦"
</code></pre>
<h3 id="å‹•ä½œã®ä»•çµ„ã¿">å‹•ä½œã®ä»•çµ„ã¿</h3>
<ol>
<li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãƒã‚°ã‚’ä¿®æ­£ã—ã¦ã€ã¨å…¥åŠ›</li>
<li>HookãŒè‡ªå‹•çš„ã«Gitãƒ–ãƒ©ãƒ³ãƒåã¨ã‚¿ã‚¹ã‚¯æƒ…å ±ã‚’è¿½åŠ </li>
<li>Claude Codeã¯æ‹¡å¼µã•ã‚ŒãŸæƒ…å ±ã‚’å—ã‘å–ã£ã¦ã€ã‚ˆã‚Šçš„ç¢ºãªå¯¾å¿œãŒå¯èƒ½ã«</li>
</ol>
<h2 id="å®Ÿè·µä¾‹2-å±é™ºã‚³ãƒãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯hook">å®Ÿè·µä¾‹2: å±é™ºã‚³ãƒãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯Hook</h2>
<p><code>rm -rf</code>ãªã©ã®å±é™ºãªã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ä¾‹ã§ã™ã€‚</p>
<p><strong><code>hooks/safety-check.sh</code></strong>:</p>
<pre><code class="language-bash">#!/bin/bash
# tool-pre-hook: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œå‰ã«ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†

# ãƒ„ãƒ¼ãƒ«æƒ…å ±ã‚’JSONã¨ã—ã¦æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã¿è¾¼ã‚€
tool_info=$(cat)

# ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šå—ã‘å–ã£ãŸJSONã‚’ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã«è¡¨ç¤ºï¼ˆæœ¬ç•ªã§ã¯å‰Šé™¤ï¼‰
# echo "å—ä¿¡ã—ãŸJSON: $tool_info" >&#x26;2

# jqãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆï¼ˆæ¨å¥¨ï¼‰
if command -v jq &#x26;> /dev/null; then
    command=$(echo "$tool_info" | jq -r '.tool_input.command // ""')
else
    # jqãŒãªã„å ´åˆã®ä»£æ›¿æ–¹æ³•ï¼ˆæ­£è¦è¡¨ç¾ã§ã‚³ãƒãƒ³ãƒ‰ã‚’æŠ½å‡ºï¼‰
    # grep -o: ãƒãƒƒãƒã—ãŸéƒ¨åˆ†ã®ã¿å‡ºåŠ›
    # cut -d'"' -f4: ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§åŒºåˆ‡ã£ã¦4ç•ªç›®ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å–å¾—
    command=$(echo "$tool_info" | grep -o '"command":"[^"]*"' | cut -d'"' -f4)
fi

# å±é™ºãªã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
if echo "$command" | grep -qE "rm -rf|dd if=|mkfs|>" ; then
    # >&#x26;2 ã¯ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã¸ã®å‡ºåŠ›ï¼ˆClaude Codeã®ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
    echo "âš ï¸ å±é™ºãªã‚³ãƒãƒ³ãƒ‰ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ: $command" >&#x26;2
    echo "å®Ÿè¡Œã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã—ãŸã€‚" >&#x26;2
    exit 1  # çµ‚äº†ã‚³ãƒ¼ãƒ‰1ï¼ˆ0ä»¥å¤–ï¼‰= ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
fi

# å•é¡Œãªã‘ã‚Œã°å…ƒã®æƒ…å ±ã‚’ãã®ã¾ã¾æ¨™æº–å‡ºåŠ›ã«è¿”ã™
echo "$tool_info"
exit 0  # çµ‚äº†ã‚³ãƒ¼ãƒ‰0 = ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã‚’è¨±å¯
</code></pre>
<h3 id="ã“ã®hookãŒå—ã‘å–ã‚‹jsonãƒ‡ãƒ¼ã‚¿ã®ä¾‹">ã“ã®HookãŒå—ã‘å–ã‚‹JSONãƒ‡ãƒ¼ã‚¿ã®ä¾‹</h3>
<pre><code class="language-json">{
  "tool_name": "run_shell_command",
  "tool_input": {
    "command": "rm -rf /important_folder"
  }
}
</code></pre>
<h3 id="ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ä¾‹">ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ä¾‹</h3>
<ul>
<li><code>rm -rf /</code>: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚’å‰Šé™¤ã™ã‚‹å±é™ºãªã‚³ãƒãƒ³ãƒ‰</li>
<li><code>dd if=/dev/zero of=/dev/sda</code>: ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å®Œå…¨ã«æ¶ˆå»</li>
<li><code>> important_file.txt</code>: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç©ºã«ã™ã‚‹</li>
</ul>
<h2 id="å®Ÿè·µä¾‹3-å®Ÿè¡Œãƒ­ã‚°è¨˜éŒ²hook">å®Ÿè·µä¾‹3: å®Ÿè¡Œãƒ­ã‚°è¨˜éŒ²Hook</h2>
<p>ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã‚’è¨˜éŒ²ã™ã‚‹ä¾‹ã§ã™ã€‚</p>
<p><strong><code>hooks/logger.sh</code></strong>:</p>
<pre><code class="language-bash">#!/bin/bash
# tool-post-hook: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œå¾Œã®å‡¦ç†

# ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆï¼ˆå­˜åœ¨ã—ãªã„å ´åˆã®ã¿ï¼‰
LOG_DIR=".claude/logs"
mkdir -p "$LOG_DIR"

# å®Ÿè¡Œçµæœã‚’æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã¿è¾¼ã‚€
execution_result=$(cat)

# ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã§ãƒ­ã‚°ã«è¨˜éŒ²
timestamp=$(date '+%Y-%m-%d %H:%M:%S')
log_file="$LOG_DIR/$(date '+%Y%m%d').log"

# ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã‚’ä½œæˆï¼ˆ>>ã¯è¿½è¨˜ãƒ¢ãƒ¼ãƒ‰ï¼‰
{
    echo "[$timestamp]"
    echo "$execution_result"
    echo "---"
} >> "$log_file"

# macOSé€šçŸ¥ã‚’é€ä¿¡ï¼ˆã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ï¼‰
# osascriptã¯macOSã®AppleScriptã‚’å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰
if echo "$execution_result" | grep -q "task.*complete"; then
    osascript -e 'display notification "ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼" with title "Claude Code"'
fi

# Windowsç’°å¢ƒã®å ´åˆï¼ˆPowerShellä½¿ç”¨ï¼‰
# if echo "$execution_result" | grep -q "task.*complete"; then
#     powershell -Command "New-BurntToastNotification -Text 'Claude Code', 'ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼'"
# fi

# çµæœã‚’ãã®ã¾ã¾æ¨™æº–å‡ºåŠ›ã«è¿”ã™ï¼ˆClaude Codeã®å‡¦ç†ã‚’å¦¨ã’ãªã„ï¼‰
echo "$execution_result"
</code></pre>
<h3 id="ã“ã®hookãŒå—ã‘å–ã‚‹jsonãƒ‡ãƒ¼ã‚¿ã®ä¾‹-1">ã“ã®HookãŒå—ã‘å–ã‚‹JSONãƒ‡ãƒ¼ã‚¿ã®ä¾‹</h3>
<pre><code class="language-json">{
  "tool_name": "write_file",
  "tool_input": {
    "file_path": "/path/to/file.js",
    "content": "console.log('Hello');"
  },
  "tool_output": "File written successfully"
}
</code></pre>
<h2 id="ã‚ˆã‚Šå®Ÿè·µçš„ãªä½¿ç”¨ä¾‹">ã‚ˆã‚Šå®Ÿè·µçš„ãªä½¿ç”¨ä¾‹</h2>
<h3 id="1-ã‚³ãƒ¼ãƒ‰ä¿å­˜æ™‚ã®è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ">1. ã‚³ãƒ¼ãƒ‰ä¿å­˜æ™‚ã®è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</h3>
<p><strong><code>hooks/auto-format.sh</code></strong>:</p>
<pre><code class="language-bash">#!/bin/bash

tool_info=$(cat)

# ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿ãƒ„ãƒ¼ãƒ«ã®å ´åˆ
if echo "$tool_info" | grep -q '"tool_name":"write_file"'; then
    # ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŠ½å‡º
    file_path=$(echo "$tool_info" | grep -o '"file_path":"[^"]*"' | cut -d'"' -f4)

    # æ‹¡å¼µå­ã«å¿œã˜ã¦ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã‚’å®Ÿè¡Œ
    case "$file_path" in
        *.js|*.ts|*.jsx|*.tsx)
            # Prettierã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå¾Œã§å®Ÿè¡Œï¼‰
            echo "prettier --write $file_path" >> .claude/post-commands.sh
            ;;
        *.py)
            # Blackã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
            echo "black $file_path" >> .claude/post-commands.sh
            ;;
    esac
fi

echo "$tool_info"
</code></pre>
<h3 id="2-ãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œ">2. ãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œ</h3>
<p>ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã«é–¢é€£ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•å®Ÿè¡Œï¼š</p>
<pre><code class="language-bash">#!/bin/bash

tool_info=$(cat)

# ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆ
if echo "$tool_info" | grep -qE '"file_path":".*\.(js|ts|py)"'; then
    file_path=$(echo "$tool_info" | grep -o '"file_path":"[^"]*"' | cut -d'"' -f4)

    # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã—ã¦å®Ÿè¡Œ
    test_file="${file_path%.js}.test.js"
    if [ -f "$test_file" ]; then
        npm test "$test_file" 2>&#x26;1 | tail -5
    fi
fi

echo "$tool_info"
</code></pre>
<h2 id="hooksãŒå—ã‘å–ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã¾ã¨ã‚">HooksãŒå—ã‘å–ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã¾ã¨ã‚</h2>
<h3 id="å„hookã®å…¥å‡ºåŠ›ä»•æ§˜">å„Hookã®å…¥å‡ºåŠ›ä»•æ§˜</h3>
<p><strong>user-prompt-submit-hook</strong></p>
<ul>
<li>æ¨™æº–å…¥åŠ›ã§å—ã‘å–ã‚‹: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ–‡å­—åˆ—</li>
<li>æ¨™æº–å‡ºåŠ›ã«è¿”ã™ã¹ãå†…å®¹: æ‹¡å¼µã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</li>
<li>ã‚¨ãƒ©ãƒ¼æ™‚ã®å‹•ä½œ: ç„¡è¦–ã•ã‚Œã‚‹</li>
</ul>
<p><strong>tool-pre-hook</strong></p>
<ul>
<li>æ¨™æº–å…¥åŠ›ã§å—ã‘å–ã‚‹: ãƒ„ãƒ¼ãƒ«æƒ…å ±JSON</li>
<li>æ¨™æº–å‡ºåŠ›ã«è¿”ã™ã¹ãå†…å®¹: åŒã˜ã¾ãŸã¯ä¿®æ­£ã•ã‚ŒãŸJSON</li>
<li>ã‚¨ãƒ©ãƒ¼æ™‚ã®å‹•ä½œ: exit 1ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«</li>
</ul>
<p><strong>tool-post-hook</strong></p>
<ul>
<li>æ¨™æº–å…¥åŠ›ã§å—ã‘å–ã‚‹: å®Ÿè¡ŒçµæœJSON</li>
<li>æ¨™æº–å‡ºåŠ›ã«è¿”ã™ã¹ãå†…å®¹: ä»»æ„ï¼ˆé€šå¸¸ã¯å…ƒã®ã¾ã¾ï¼‰</li>
<li>ã‚¨ãƒ©ãƒ¼æ™‚ã®å‹•ä½œ: ç„¡è¦–ã•ã‚Œã‚‹</li>
</ul>
<h2 id="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°">ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
<h3 id="ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•">ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•</h3>
<h4 id="1-hookãŒå®Ÿè¡Œã•ã‚Œãªã„">1. HookãŒå®Ÿè¡Œã•ã‚Œãªã„</h4>
<p><strong>åŸå› </strong>: å®Ÿè¡Œæ¨©é™ãŒãªã„</p>
<p><strong>è§£æ±ºæ–¹æ³•</strong>:</p>
<pre><code class="language-bash"># âš ï¸ è­¦å‘Š: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å†…å®¹ã‚’ç¢ºèªã—ã¦ã‹ã‚‰å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸ã—ã¦ãã ã•ã„
# ä¸æ˜ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å®Ÿè¡Œæ¨©é™ã‚’ä¸ãˆã‚‹ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™

# ã¾ãšã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å†…å®¹ã‚’ç¢ºèª
cat hooks/*.sh

# å†…å®¹ãŒå®‰å…¨ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
chmod +x hooks/*.sh
</code></pre>
<h4 id="2-jsonã®è§£æã§ã‚¨ãƒ©ãƒ¼">2. JSONã®è§£æã§ã‚¨ãƒ©ãƒ¼</h4>
<p><strong>åŸå› </strong>: <code>jq</code>ã‚³ãƒãƒ³ãƒ‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„</p>
<p><strong>è§£æ±ºæ–¹æ³•</strong>:</p>
<pre><code class="language-bash"># macOS
brew install jq

# Windows (Chocolatey)
choco install jq

# ã¾ãŸã¯ã€grepã¨sedã§ä»£æ›¿
echo "$json" | grep -o '"key":"[^"]*"' | cut -d'"' -f4
</code></pre>
<h4 id="3-ãƒ‘ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„">3. ãƒ‘ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„</h4>
<p><strong>åŸå› </strong>: ç›¸å¯¾ãƒ‘ã‚¹ãŒæ­£ã—ããªã„
<strong>è§£æ±ºæ–¹æ³•</strong>: çµ¶å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨</p>
<pre><code class="language-json">{
  "hooks": {
    "tool-post-hook": "/Users/yourname/project/hooks/logger.sh"
  }
}
</code></pre>
<h4 id="4-ãƒ‡ãƒãƒƒã‚°æ–¹æ³•">4. ãƒ‡ãƒãƒƒã‚°æ–¹æ³•</h4>
<p>HookãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã«ã¯ï¼š</p>
<pre><code class="language-bash"># ãƒ‡ãƒãƒƒã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã«è¡¨ç¤º
echo "ãƒ‡ãƒãƒƒã‚°: ã“ã“ã¾ã§å®Ÿè¡Œã•ã‚Œã¾ã—ãŸ" >&#x26;2
echo "å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿: $data" >&#x26;2

# ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›
echo "$(date): Hookå®Ÿè¡Œ" >> /tmp/hook-debug.log
</code></pre>
<h2 id="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ³¨æ„ç‚¹">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ³¨æ„ç‚¹</h2>
<h3 id="1-ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ¨©é™ç®¡ç†">1. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ¨©é™ç®¡ç†</h3>
<p>Hookã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã¯æœ€å°é™ã®æ¨©é™ã®ã¿ã‚’ä»˜ä¸ï¼š</p>
<pre><code class="language-bash"># æ‰€æœ‰è€…ã®ã¿å®Ÿè¡Œå¯èƒ½
chmod 700 hooks/*.sh
</code></pre>
<h3 id="2-å…¥åŠ›å€¤ã®æ¤œè¨¼">2. å…¥åŠ›å€¤ã®æ¤œè¨¼</h3>
<p>å¤–éƒ¨å…¥åŠ›ã¯å¿…ãšæ¤œè¨¼ï¼š</p>
<pre><code class="language-bash"># æ‚ªæ„ã®ã‚ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã‚’é˜²ã
if [[ "$input" =~ ^[a-zA-Z0-9_-]+$ ]]; then
    # å®‰å…¨ãªå…¥åŠ›ã®ã¿å‡¦ç†
    process_input "$input"
fi
</code></pre>
<h3 id="3-ãƒ­ã‚°ã®ä¿è­·">3. ãƒ­ã‚°ã®ä¿è­·</h3>
<p>æ©Ÿå¯†æƒ…å ±ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã—ãªã„ï¼š</p>
<pre><code class="language-bash"># ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒã‚¹ã‚¯
echo "$result" | sed 's/password=.*/password=****/g' >> log.txt
</code></pre>
<h2 id="ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹">ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>
<h3 id="1-hookã¯è»½é‡ã«ä¿ã¤">1. Hookã¯è»½é‡ã«ä¿ã¤</h3>
<p>Hookã®å‡¦ç†ã¯é«˜é€Ÿã«ï¼š</p>
<ul>
<li>é‡ã„å‡¦ç†ã¯éåŒæœŸã§å®Ÿè¡Œ</li>
<li>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¨­å®š</li>
<li>å¿…è¦æœ€å°é™ã®å‡¦ç†ã®ã¿</li>
</ul>
<h3 id="2-ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°">2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h3>
<pre><code class="language-bash">#!/bin/bash
set -e  # ã‚¨ãƒ©ãƒ¼æ™‚ã«å³åº§ã«çµ‚äº†
trap 'echo "Error occurred at line $LINENO"' ERR
</code></pre>
<h3 id="3-ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰">3. ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰</h3>
<pre><code class="language-bash"># DEBUGç’°å¢ƒå¤‰æ•°ã§ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆ
if [ "$DEBUG" = "1" ]; then
    set -x  # ã‚³ãƒãƒ³ãƒ‰ã‚’è¡¨ç¤º
    exec 2>hooks-debug.log  # ã‚¨ãƒ©ãƒ¼ã‚’ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«
fi
</code></pre>
<h2 id="ãƒãƒ³ã‚ºã‚ªãƒ³ã‚¿ã‚¹ã‚¯å®Œäº†é€šçŸ¥hookã‚’ä½œã£ã¦ã¿ã‚ˆã†">ãƒãƒ³ã‚ºã‚ªãƒ³ï¼šã‚¿ã‚¹ã‚¯å®Œäº†é€šçŸ¥Hookã‚’ä½œã£ã¦ã¿ã‚ˆã†</h2>
<p>å®Ÿéš›ã«Hookã‚’ä½œæˆã—ã¦å‹•ä½œã‚’ä½“é¨“ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯ã€ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ãŸã¨ãã«macOSã§é€šçŸ¥ã‚’è¡¨ç¤ºã™ã‚‹Hookã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—1-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¨­å®šã‚’ä½œæˆ">ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¨­å®šã‚’ä½œæˆ</h3>
<pre><code class="language-bash"># ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
mkdir -p .claude/hooks
</code></pre>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—2-é€šçŸ¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ">ã‚¹ãƒ†ãƒƒãƒ—2: é€šçŸ¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ</h3>
<p><code>.claude/hooks/task-notifier.sh</code>ã‚’ä½œæˆï¼š</p>
<pre><code class="language-bash">#!/bin/bash
# tool-post-hook: ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã«é€šçŸ¥ã‚’é€ã‚‹

# å®Ÿè¡Œçµæœã‚’æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã¿è¾¼ã‚€
execution_result=$(cat)

# TodoWriteãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œã‚’æ¤œçŸ¥
if echo "$execution_result" | grep -q '"tool_name":"TodoWrite"'; then
    # completedã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¸ã®å¤‰æ›´ã‚’æ¤œçŸ¥
    if echo "$execution_result" | grep -q '"status":"completed"'; then
        # macOSã®é€šçŸ¥ã‚’é€ä¿¡
        osascript -e 'display notification "ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼ğŸ‰" with title "Claude Code" sound name "Glass"'
    fi
fi

# ã‚¿ã‚¹ã‚¯é–¢é€£ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§é€šçŸ¥
if echo "$execution_result" | grep -qi "task.*complet\|å®Œäº†\|finished"; then
    osascript -e 'display notification "ä½œæ¥­ãŒå®Œäº†ã—ã¾ã—ãŸï¼" with title "Claude Code"'
fi

# çµæœã‚’ãã®ã¾ã¾æ¨™æº–å‡ºåŠ›ã«è¿”ã™ï¼ˆé‡è¦ï¼ï¼‰
echo "$execution_result"
</code></pre>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—3-settingsjsonã‚’è¨­å®š">ã‚¹ãƒ†ãƒƒãƒ—3: settings.jsonã‚’è¨­å®š</h3>
<p><code>.claude/settings.json</code>ã‚’ä½œæˆï¼š</p>
<pre><code class="language-json">{
  "hooks": {
    "tool-post-hook": "./hooks/task-notifier.sh"
  }
}
</code></pre>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—4-å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸">ã‚¹ãƒ†ãƒƒãƒ—4: å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸</h3>
<pre><code class="language-bash"># ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å†…å®¹ã‚’ç¢ºèª
cat .claude/hooks/task-notifier.sh

# å®‰å…¨ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰æ¨©é™ä»˜ä¸
chmod +x .claude/hooks/task-notifier.sh
</code></pre>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—5-å‹•ä½œç¢ºèª">ã‚¹ãƒ†ãƒƒãƒ—5: å‹•ä½œç¢ºèª</h3>
<p>Claude Codeã§ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã•ã›ã¦ã€é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªï¼š</p>
<pre><code>ã€ŒREADME.mdã‚’æ›´æ–°ã—ã¦ã€
</code></pre>
<p>ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã™ã‚‹ã¨ã€macOSã®é€šçŸ¥ã‚»ãƒ³ã‚¿ãƒ¼ã«ã€Œã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼ğŸ‰ã€ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
<h3 id="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°-1">ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h3>
<p><strong>é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆï¼š</strong></p>
<ol>
<li>ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®š â†’ é€šçŸ¥ã¨ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ â†’ ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®é€šçŸ¥ãŒæœ‰åŠ¹ã‹ç¢ºèª</li>
<li>ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œæ¨©é™ã‚’ç¢ºèª: <code>ls -la .claude/hooks/</code></li>
<li>ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã‚’è¿½åŠ ã—ã¦ç¢ºèªï¼š
<pre><code class="language-bash">echo "Hookå®Ÿè¡Œä¸­: $(date)" >> /tmp/hook-debug.log
</code></pre>
</li>
</ol>
<h3 id="windowsç‰ˆã®ä»£æ›¿å®Ÿè£…">Windowsç‰ˆã®ä»£æ›¿å®Ÿè£…</h3>
<p>Windowsã®å ´åˆã¯ã€PowerShellã‚’ä½¿ç”¨ï¼š</p>
<pre><code class="language-bash">#!/bin/bash
execution_result=$(cat)

if echo "$execution_result" | grep -qi "task.*complet\|å®Œäº†"; then
    # Windowsé€šçŸ¥
    powershell -Command "
        Add-Type -AssemblyName System.Windows.Forms
        \$notification = New-Object System.Windows.Forms.NotifyIcon
        \$notification.Icon = [System.Drawing.SystemIcons]::Information
        \$notification.BalloonTipTitle = 'Claude Code'
        \$notification.BalloonTipText = 'ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼'
        \$notification.Visible = \$true
        \$notification.ShowBalloonTip(5000)
    "
fi

echo "$execution_result"
</code></pre>
<h3 id="å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ">å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ</h3>
<ol>
<li><strong>æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã¿è¾¼ã‚€</strong>: <code>$(cat)</code>ã§JSONãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹</li>
<li><strong>æ¡ä»¶åˆ¤å®š</strong>: <code>grep</code>ã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æ¤œç´¢</li>
<li><strong>é€šçŸ¥ã®å®Ÿè¡Œ</strong>: OSå›ºæœ‰ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨</li>
<li><strong>å…ƒãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™</strong>: å¿…ãš<code>echo "$execution_result"</code>ã§è¿”ã™</li>
</ol>
<p>ã“ã‚Œã§ã€ã‚ãªãŸã‚‚ç‹¬è‡ªã®Hookã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼</p>
<h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h2>
<p>Claude Code Hooksã‚’ä½¿ãˆã°ï¼š</p>
<ol>
<li><strong>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è‡ªå‹•æ‹¡å¼µ</strong>ã§ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è‡ªå‹•è¿½åŠ </li>
<li><strong>å±é™ºæ“ä½œã®ãƒ–ãƒ­ãƒƒã‚¯</strong>ã§ã€å®‰å…¨æ€§ã‚’ç¢ºä¿</li>
<li><strong>å®Ÿè¡Œãƒ­ã‚°ã®è¨˜éŒ²</strong>ã§ã€ä½œæ¥­å±¥æ­´ã‚’ç®¡ç†</li>
<li><strong>è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</strong>ã§ã€ã‚³ãƒ¼ãƒ‰å“è³ªã‚’ç¶­æŒ</li>
<li><strong>é€šçŸ¥æ©Ÿèƒ½</strong>ã§ã€ä½œæ¥­ã®é€²æ—ã‚’æŠŠæ¡</li>
</ol>
<p>ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€é–‹ç™ºåŠ¹ç‡ãŒå¤§å¹…ã«å‘ä¸Šã—ã¾ã™ã€‚</p>
<h3 id="æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
<ol>
<li>åŸºæœ¬çš„ãªHookã‹ã‚‰å§‹ã‚ã‚‹ï¼ˆã¾ãšã¯ãƒ­ã‚°è¨˜éŒ²ã‹ã‚‰ï¼‰</li>
<li>ãƒãƒ¼ãƒ å›ºæœ‰ã®ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</li>
<li>è¤‡æ•°ã®Hookã‚’çµ„ã¿åˆã‚ã›ã¦é«˜åº¦ãªè‡ªå‹•åŒ–ã‚’å®Ÿç¾</li>
</ol>
<h3 id="å­¦ç¿’ã®ãƒã‚¤ãƒ³ãƒˆ">å­¦ç¿’ã®ãƒã‚¤ãƒ³ãƒˆ</h3>
<ul>
<li>Hooksã¯ã€Œã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã€ã®è‡ªå‹•åŒ–</li>
<li>æ¨™æº–å…¥å‡ºåŠ›ã‚’ä½¿ã£ãŸæƒ…å ±ã®å—ã‘æ¸¡ã—</li>
<li>çµ‚äº†ã‚³ãƒ¼ãƒ‰ã§å®Ÿè¡Œã®å¯å¦ã‚’åˆ¶å¾¡</li>
<li>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®åŸºæœ¬ãŒé‡è¦</li>
</ul>
<p>ã“ã‚Œã§Claude Code Hooksã®åŸºæœ¬ã‹ã‚‰å®Ÿè·µã¾ã§ç†è§£ã§ããŸã¯ãšã§ã™ã€‚ã•ã‚ã€ã‚ãªãŸã®é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è‡ªå‹•åŒ–ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
<h2 id="å‚è€ƒãƒªãƒ³ã‚¯">å‚è€ƒãƒªãƒ³ã‚¯</h2>
<h3 id="å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h3>
<ul>
<li><a href="https://docs.anthropic.com/claude-code">Claude Code å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="https://docs.anthropic.com/en/docs/claude-code/hooks">Claude Code Hooksè©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="https://docs.anthropic.com/en/docs/claude-code/settings">Claude Code Settingsä»•æ§˜</a></li>
</ul>
<h3 id="å‚è€ƒã«ã—ãŸæƒ…å ±æº">å‚è€ƒã«ã—ãŸæƒ…å ±æº</h3>
<p>æœ¬è¨˜äº‹ã®æ–°å½¢å¼ã«é–¢ã™ã‚‹æƒ…å ±ã¯ã€ä»¥ä¸‹ã®èª¿æŸ»ã«ã‚ˆã‚Šç¢ºèªã—ã¾ã—ãŸï¼š</p>
<ul>
<li>Claude Codeå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®Hooksãƒšãƒ¼ã‚¸ï¼ˆWebFetch APIã§ç¢ºèªï¼‰</li>
<li>ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ<code>~/.claude/settings.json</code>ï¼‰ã®å®Ÿä¾‹ç¢ºèª</li>
<li>Claude Codeå†…éƒ¨ã®Taskãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹è©³ç´°èª¿æŸ»</li>
</ul>
<h3 id="é–¢é€£æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ">é–¢é€£æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h3>
<ul>
<li><a href="https://www.gnu.org/software/bash/manual/">Bash ã‚¹ã‚¯ãƒªãƒ—ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰</a></li>
<li><a href="https://stedolan.github.io/jq/manual/">jq ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a></li>
<li><a href="https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA-Git-%E3%83%95%E3%83%83%E3%82%AF">Git Hooks ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
</ul>4:["$","div",null,{"className":"max-w-2xl mx-auto py-10 px-4","children":[["$","h1",null,{"className":"text-3xl font-bold mb-2","children":[["$","span",null,{"className":"text-green-600","children":["#",24]}]," ","Claude Code Hookså®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼šé–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è‡ªå‹•åŒ–ã™ã‚‹é­”æ³•ã®ä»•çµ„ã¿"]}],["$","ul",null,{"className":"list-none border-b border-gray-600 pb-4 mb-6","children":[["$","li",null,{"className":"text-gray-500 text-sm","children":["ä½œæˆæ—¥æ™‚: ","2025-08-07 19:16"]}],"$undefined",["$","li",null,{"className":"flex flex-wrap gap-2 mt-2","children":[["$","span","0",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"Claude Code"}],["$","span","1",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"Hooks"}],["$","span","2",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"è‡ªå‹•åŒ–"}],["$","span","3",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"é–‹ç™ºåŠ¹ç‡åŒ–"}],["$","span","4",{"className":"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs","children":"macOS"}]]}]]}],["$","nav",null,{"className":"mb-6 pb-4 border-b border-gray-700 flex justify-between","children":[["$","$L12",null,{"href":"/","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"â† ãƒ›ãƒ¼ãƒ ã¸"}],["$","$L12",null,{"href":"/blog","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"è¨˜äº‹ä¸€è¦§ã¸ â†’"}]]}],["$","article",null,{"className":"prose dark:prose-invert","dangerouslySetInnerHTML":{"__html":"$13"}}],["$","$L14",null,{}],["$","nav",null,{"className":"mt-8 pt-4 border-t border-gray-700 flex justify-between","children":[["$","$L12",null,{"href":"/","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"â† ãƒ›ãƒ¼ãƒ ã¸"}],["$","$L12",null,{"href":"/blog","className":"text-blue-400 hover:text-blue-300 hover:underline","children":"è¨˜äº‹ä¸€è¦§ã¸ â†’"}]]}],["$","$L15",null,{}]]}]
d:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:null
11:{"metadata":[["$","title","0",{"children":"Maita Tomoya Dev IO"}],["$","meta","1",{"name":"description","content":"ç±³ç”°æ™ºå“‰ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã€‚ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã—ãŸã“ã¨ã‚’ãƒ¡ãƒ¢ã—ã¾ã™ã€‚"}]],"error":null,"digest":"$undefined"}
b:{"metadata":"$11:metadata","error":null,"digest":"$undefined"}
