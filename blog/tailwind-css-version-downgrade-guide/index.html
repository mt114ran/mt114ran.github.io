<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/ce87a0c8fce915ba.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-29ebadaebe2fcb3f.js"/><script src="/_next/static/chunks/4bd1b696-d8f047cced1b4886.js" async=""></script><script src="/_next/static/chunks/684-8e4d9e1e4139006e.js" async=""></script><script src="/_next/static/chunks/main-app-d1c324b32b03123c.js" async=""></script><script src="/_next/static/chunks/874-8d3839f72fd80c3c.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-677ab5ce4505fca7.js" async=""></script><meta name="next-size-adjust" content=""/><link rel="icon" href="/favicon.png" type="image/png"/><title>Maita Tomoya Dev IO</title><meta name="description" content="米田智哉の技術ブログ。キャッチアップしたことをメモします。"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_5cfdac __variable_9a8899 antialiased"><div class="max-w-2xl mx-auto py-10 px-4"><h1 class="text-3xl font-bold mb-2"><span class="text-green-600">#<!-- -->7</span> <!-- -->Tailwind CSS v4からv3へのダウングレード完全ガイド：バージョン互換性問題の解決</h1><ul class="list-none border-b border-gray-600 pb-4 mb-6"><li class="text-gray-500 text-sm">作成日時: <!-- -->2025-08-02 07:00</li><li class="text-gray-500 text-sm">更新日時: <!-- -->2025-08-02 19:30</li><li class="flex flex-wrap gap-2 mt-2"><span class="px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs">Tailwind CSS</span><span class="px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs">トラブルシューティング</span><span class="px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs">初心者向け</span><span class="px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs">Next.js</span><span class="px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs">CSS</span></li></ul><nav class="mb-6 pb-4 border-b border-gray-700 flex justify-between"><a class="text-blue-400 hover:text-blue-300 hover:underline" href="/">← ホームへ</a><a class="text-blue-400 hover:text-blue-300 hover:underline" href="/blog/">記事一覧へ →</a></nav><article class="prose dark:prose-invert"><h1>Tailwind CSS v4からv3へのダウングレード完全ガイド</h1>
<h2>はじめに：なぜこの記事を書いたのか</h2>
<p>最新技術を使いたい気持ちは開発者なら誰でも持っています。しかし、「最新＝最良」とは限りません。今回、Tailwind CSS v4を導入したプロジェクトで発生した問題と、その解決過程を共有します。</p>
<p>この記事は、以下のような方に役立ちます：</p>
<ul>
<li>Tailwind CSSのバージョン問題に直面している方</li>
<li>ライブラリのダウングレード方法を学びたい初心者エンジニア</li>
<li>本番環境と開発環境で異なる挙動に悩んでいる方</li>
</ul>
<h2>発生した問題：症状の詳細</h2>
<h3>環境による挙動の違い</h3>
<p>私のNext.jsプロジェクトで、以下の症状が発生しました：</p>
<p><strong>ローカル環境（開発環境）</strong></p>
<ul>
<li>✅ Tailwind CSSの基本スタイル（色、レイアウトなど）は適用される</li>
<li>❌ Markdownコンテンツの<code>prose</code>クラスが効かない</li>
<li>❌ ブログ記事のスタイルが崩れる</li>
</ul>
<p><strong>GitHub Pages（本番環境）</strong></p>
<ul>
<li>❌ Tailwind CSS自体が全く適用されない</li>
<li>❌ サイト全体のスタイルが崩れる</li>
</ul>
<h3>なぜ環境によって違いが出たのか？</h3>
<pre><code class="language-mermaid">graph TD
    A[開発環境] --> B[webpack-dev-server]
    B --> C[動的にCSSを生成]
    C --> D[部分的に動作]
    
    E[本番環境] --> F[静的ビルド]
    F --> G[CSSファイル生成失敗]
    G --> H[スタイル未適用]
</code></pre>
<p>開発環境では動的にCSSが生成されるため部分的に動作していましたが、本番ビルドでは静的ファイル生成時に問題が発生していました。</p>
<h2>問題の原因：Tailwind CSS v4の互換性</h2>
<h3>1. Tailwind CSS v4の変更点</h3>
<p>Tailwind CSS v4は2024年にリリースされた大幅アップデートで、以下の変更がありました：</p>
<pre><code class="language-css">/* v3の書き方 */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* v4の新しい書き方 */
@import "tailwindcss";
</code></pre>
<h3>2. プラグインの互換性問題</h3>
<p>特に問題となったのは<code>@tailwindcss/typography</code>プラグインです：</p>
<pre><code class="language-json">{
  "devDependencies": {
    "tailwindcss": "^4.0.0",           // 最新版
    "@tailwindcss/typography": "^0.5.16" // v4未対応
  }
}
</code></pre>
<p>このプラグインはMarkdownコンテンツに<code>prose</code>クラスでスタイルを適用しますが、v4との互換性がまだ完全ではありませんでした。</p>
<h3>3. PostCSS設定の変更</h3>
<p>v4では新しいPostCSS設定方法が導入されました：</p>
<pre><code class="language-javascript">// v4の新しい設定（問題あり）
const config = {
  plugins: ["@tailwindcss/postcss"],
};

// v3の従来の設定（安定）
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</code></pre>
<h2>解決策の検討：3つの選択肢</h2>
<h3>選択肢1：Tailwind CSS v3へのダウングレード（採用）</h3>
<p><strong>メリット</strong></p>
<ul>
<li>✅ 安定性が高い</li>
<li>✅ プラグインの互換性が保証されている</li>
<li>✅ ドキュメントが充実</li>
<li>✅ コミュニティサポートが豊富</li>
</ul>
<p><strong>デメリット</strong></p>
<ul>
<li>❌ 最新機能が使えない</li>
<li>❌ 将来的に再度アップグレードが必要</li>
</ul>
<h3>選択肢2：v4を維持して手動でスタイル追加</h3>
<p><strong>メリット</strong></p>
<ul>
<li>✅ 最新版を使い続けられる</li>
<li>✅ 新機能を活用できる</li>
</ul>
<p><strong>デメリット</strong></p>
<ul>
<li>❌ 大量のカスタムCSSが必要</li>
<li>❌ メンテナンスコストが高い</li>
<li>❌ プラグインの恩恵を受けられない</li>
</ul>
<h3>選択肢3：v4対応を待つ</h3>
<p><strong>メリット</strong></p>
<ul>
<li>✅ 将来的に最良の解決策になる可能性</li>
</ul>
<p><strong>デメリット</strong></p>
<ul>
<li>❌ いつ対応されるか不明</li>
<li>❌ 現在の問題が解決しない</li>
<li>❌ プロジェクトの進行に影響</li>
</ul>
<h3>なぜダウングレードを選んだか</h3>
<p>プロジェクトの要件と状況を考慮した結果：</p>
<ol>
<li><strong>安定性重視</strong>：ブログサイトは安定稼働が最優先</li>
<li><strong>時間的制約</strong>：すぐに問題を解決する必要があった</li>
<li><strong>リスク最小化</strong>：v3は実績があり、問題が少ない</li>
</ol>
<h2>実装手順：ステップバイステップガイド</h2>
<h3>Step 1：パッケージのアンインストール</h3>
<pre><code class="language-bash"># v4関連パッケージを削除
npm uninstall tailwindcss @tailwindcss/postcss
</code></pre>
<h3>Step 2：v3系パッケージのインストール</h3>
<pre><code class="language-bash"># v3系と必要な依存関係をインストール
npm install -D tailwindcss@^3.4.0 postcss autoprefixer
</code></pre>
<p><strong>ポイント</strong>：<code>^3.4.0</code>のように範囲指定することで、v3系の最新パッチは受け取れます。</p>
<h3>Step 3：PostCSS設定の更新</h3>
<pre><code class="language-javascript">// postcss.config.mjs
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</code></pre>
<h3>Step 4：Tailwind設定ファイルの確認</h3>
<pre><code class="language-typescript">// tailwind.config.ts
import { type Config } from 'tailwindcss'
import typography from '@tailwindcss/typography'

const config: Config = {
  content: ['./src/**/*.{js,ts,jsx,tsx,mdx}'],
  darkMode: 'class',
  theme: {
    extend: {
      // カスタマイズ設定
    },
  },
  plugins: [typography], // プラグインが正常に動作
}

export default config
</code></pre>
<h3>Step 5：CSSファイルの修正</h3>
<pre><code class="language-css">/* src/app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* カスタムスタイル */
body {
  @apply bg-black text-white;
}
</code></pre>
<h3>Step 6：ビルドとテスト</h3>
<pre><code class="language-bash"># ビルドを実行
npm run build

# 開発サーバーで確認
npm run dev

# 本番ビルドのプレビュー
npm run start
</code></pre>
<h2>実務で役立つTips：ダウングレード時の注意点</h2>
<h3>1. バージョン管理の重要性</h3>
<pre><code class="language-json">// package.json
{
  "devDependencies": {
    // NG: 最新版を自動的に取得
    "tailwindcss": "latest",
    
    // OK: メジャーバージョンを固定
    "tailwindcss": "^3.4.0",
    
    // BEST: 完全にバージョンを固定（重要なプロジェクト）
    "tailwindcss": "3.4.17"
  }
}
</code></pre>
<h3>2. 変更前のバックアップ</h3>
<pre><code class="language-bash"># ブランチを作成して作業
git checkout -b fix/downgrade-tailwind

# 重要ファイルのバックアップ
cp package.json package.json.backup
cp package-lock.json package-lock.json.backup
</code></pre>
<h3>3. 段階的な確認</h3>
<pre><code class="language-bash"># 1. 依存関係の確認
npm list tailwindcss

# 2. ビルドエラーの確認
npm run build 2>&#x26;1 | tee build.log

# 3. 実際の表示確認
# - 開発環境
# - ステージング環境
# - 本番環境
</code></pre>
<h3>4. チーム内での情報共有</h3>
<pre><code class="language-markdown">## 変更内容
- Tailwind CSS: v4.0.0 → v3.4.17
- 理由：v4とtypographyプラグインの互換性問題
- 影響：なし（v3で全機能カバー）
- TODO：v4対応完了後に再アップグレード検討
</code></pre>
<h2>よくあるトラブルと解決方法</h2>
<h3>Q1：ダウングレード後もスタイルが適用されない</h3>
<p><strong>確認ポイント</strong></p>
<ol>
<li><code>node_modules</code>を削除して再インストール</li>
</ol>
<pre><code class="language-bash">rm -rf node_modules package-lock.json
npm install
</code></pre>
<ol start="2">
<li>キャッシュのクリア</li>
</ol>
<pre><code class="language-bash">npm cache clean --force
</code></pre>
<h3>Q2：ビルド時に警告が出る</h3>
<p><strong>対処法</strong></p>
<pre><code class="language-bash"># PostCSSの設定ファイル名を確認
# .mjs, .js, .cjs のいずれかに統一
mv postcss.config.js postcss.config.mjs
</code></pre>
<h3>Q3：特定の機能が使えなくなった</h3>
<p><strong>解決策</strong></p>
<pre><code class="language-javascript">// v4の新機能を使っていた場合
// 代替手段を検討

// 例：v4の新しいユーティリティ
// → カスタムCSSクラスで対応
.custom-class {
  /* v3でサポートされていないスタイル */
}
</code></pre>
<h2>ダウングレードの判断基準</h2>
<h3>ダウングレードすべき時</h3>
<ul>
<li>✅ プラグインの互換性問題がある</li>
<li>✅ 本番環境で重大な問題が発生</li>
<li>✅ 早急な対応が必要</li>
<li>✅ 安定性が最優先</li>
</ul>
<h3>アップグレードを待つべき時</h3>
<ul>
<li>⏸ 新機能が必須要件</li>
<li>⏸ 開発環境のみの使用</li>
<li>⏸ 時間的余裕がある</li>
<li>⏸ カスタム実装で対応可能</li>
</ul>
<h2>まとめ：学んだこと</h2>
<h3>1. 最新版＝最良ではない</h3>
<p>新しいバージョンには以下のリスクがあります：</p>
<ul>
<li>プラグインの未対応</li>
<li>ドキュメントの不足</li>
<li>バグの存在</li>
<li>コミュニティサポートの不足</li>
</ul>
<h3>2. 段階的なアップグレードの重要性</h3>
<pre><code class="language-mermaid">graph LR
    A[現行版] --> B[開発環境でテスト]
    B --> C[ステージング環境]
    C --> D[本番環境]
    B -.->|問題発生| E[ロールバック]
</code></pre>
<h3>3. バージョン管理の重要性</h3>
<ul>
<li><code>package-lock.json</code>を必ずコミット</li>
<li>バージョン範囲を適切に設定</li>
<li>変更履歴を記録</li>
</ul>
<h2>実務での応用：今後のために</h2>
<h3>プロジェクト開始時のチェックリスト</h3>
<pre><code class="language-markdown">- [ ] 使用するライブラリのバージョン確認
- [ ] 依存関係の互換性チェック
- [ ] LTS（長期サポート）版の検討
- [ ] アップグレードパスの確認
</code></pre>
<h3>CI/CDパイプラインでの対策</h3>
<pre><code class="language-yaml"># GitHub Actionsの例
- name: Version Check
  run: |
    npm list tailwindcss
    npm audit
    npm run build
</code></pre>
<h3>ドキュメント化</h3>
<pre><code class="language-markdown"># 技術スタック
| ライブラリ | バージョン | 理由 | 更新予定 |
|----------|----------|------|---------|
| Tailwind CSS | 3.4.17 | 安定性重視 | v4対応待ち |
| Next.js | 15.3.3 | 最新安定版 | 継続更新 |
</code></pre>
<h2>さいごに</h2>
<p>バージョン管理は開発者にとって避けて通れない課題です。今回の経験から学んだのは：</p>
<ol>
<li><strong>問題を正確に把握する</strong>：環境による違いを理解</li>
<li><strong>選択肢を比較検討する</strong>：メリット・デメリットを整理</li>
<li><strong>適切な判断をする</strong>：プロジェクトの要件に合わせて選択</li>
<li><strong>知見を共有する</strong>：チームや コミュニティに還元</li>
</ol>
<p>この記事が、同じような問題に直面した方の助けになれば幸いです。</p>
<h2>参考リンク</h2>
<ul>
<li><a href="https://v3.tailwindcss.com/">Tailwind CSS v3 Documentation</a></li>
<li><a href="https://tailwindcss.com/docs/v4">Tailwind CSS v4 Breaking Changes</a></li>
<li><a href="https://docs.npmjs.com/about-semantic-versioning">npm Semantic Versioning</a></li>
<li><a href="https://www.atlassian.com/git/tutorials/comparing-workflows">Git Branching Strategies</a></li>
</ul>
</article><nav class="mt-8 pt-4 border-t border-gray-700 flex justify-between"><a class="text-blue-400 hover:text-blue-300 hover:underline" href="/">← ホームへ</a><a class="text-blue-400 hover:text-blue-300 hover:underline" href="/blog/">記事一覧へ →</a></nav></div><!--$--><!--/$--><!--$--><!--/$--><script src="/_next/static/chunks/webpack-29ebadaebe2fcb3f.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1295,[],\"\"]\n5:I[9665,[],\"MetadataBoundary\"]\n7:I[9665,[],\"OutletBoundary\"]\na:I[4911,[],\"AsyncMetadataOutlet\"]\nc:I[9665,[],\"ViewportBoundary\"]\ne:I[6614,[],\"\"]\n:HL[\"/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/ce87a0c8fce915ba.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"c3-THRkVeQg09qgmhNUB9\",\"p\":\"\",\"c\":[\"\",\"blog\",\"tailwind-css-version-downgrade-guide\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"tailwind-css-version-downgrade-guide\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ce87a0c8fce915ba.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.png\",\"type\":\"image/png\"}]}],[\"$\",\"body\",null,{\"className\":\"__variable_5cfdac __variable_9a8899 antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"tailwind-css-version-downgrade-guide\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L4\",[\"$\",\"$L5\",null,{\"children\":\"$L6\"}],null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",\"$L9\",[\"$\",\"$La\",null,{\"promise\":\"$@b\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"vA28BHC4vunEA76tvawts\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$e\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"f:\"$Sreact.suspense\"\n10:I[4911,[],\"AsyncMetadata\"]\n6:[\"$\",\"$f\",null,{\"fallback\":null,\"children\":[\"$\",\"$L10\",null,{\"promise\":\"$@11\"}]}]\n"])</script><script>self.__next_f.push([1,"9:null\n"])</script><script>self.__next_f.push([1,"12:I[6874,[\"874\",\"static/chunks/874-8d3839f72fd80c3c.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-677ab5ce4505fca7.js\"],\"\"]\n13:T3029,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eTailwind CSS v4からv3へのダウングレード完全ガイド\u003c/h1\u003e\n\u003ch2\u003eはじめに：なぜこの記事を書いたのか\u003c/h2\u003e\n\u003cp\u003e最新技術を使いたい気持ちは開発者なら誰でも持っています。しかし、「最新＝最良」とは限りません。今回、Tailwind CSS v4を導入したプロジェクトで発生した問題と、その解決過程を共有します。\u003c/p\u003e\n\u003cp\u003eこの記事は、以下のような方に役立ちます：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTailwind CSSのバージョン問題に直面している方\u003c/li\u003e\n\u003cli\u003eライブラリのダウングレード方法を学びたい初心者エンジニア\u003c/li\u003e\n\u003cli\u003e本番環境と開発環境で異なる挙動に悩んでいる方\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e発生した問題：症状の詳細\u003c/h2\u003e\n\u003ch3\u003e環境による挙動の違い\u003c/h3\u003e\n\u003cp\u003e私のNext.jsプロジェクトで、以下の症状が発生しました：\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eローカル環境（開発環境）\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e✅ Tailwind CSSの基本スタイル（色、レイアウトなど）は適用される\u003c/li\u003e\n\u003cli\u003e❌ Markdownコンテンツの\u003ccode\u003eprose\u003c/code\u003eクラスが効かない\u003c/li\u003e\n\u003cli\u003e❌ ブログ記事のスタイルが崩れる\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eGitHub Pages（本番環境）\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e❌ Tailwind CSS自体が全く適用されない\u003c/li\u003e\n\u003cli\u003e❌ サイト全体のスタイルが崩れる\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eなぜ環境によって違いが出たのか？\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-mermaid\"\u003egraph TD\n    A[開発環境] --\u003e B[webpack-dev-server]\n    B --\u003e C[動的にCSSを生成]\n    C --\u003e D[部分的に動作]\n    \n    E[本番環境] --\u003e F[静的ビルド]\n    F --\u003e G[CSSファイル生成失敗]\n    G --\u003e H[スタイル未適用]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e開発環境では動的にCSSが生成されるため部分的に動作していましたが、本番ビルドでは静的ファイル生成時に問題が発生していました。\u003c/p\u003e\n\u003ch2\u003e問題の原因：Tailwind CSS v4の互換性\u003c/h2\u003e\n\u003ch3\u003e1. Tailwind CSS v4の変更点\u003c/h3\u003e\n\u003cp\u003eTailwind CSS v4は2024年にリリースされた大幅アップデートで、以下の変更がありました：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-css\"\u003e/* v3の書き方 */\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* v4の新しい書き方 */\n@import \"tailwindcss\";\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e2. プラグインの互換性問題\u003c/h3\u003e\n\u003cp\u003e特に問題となったのは\u003ccode\u003e@tailwindcss/typography\u003c/code\u003eプラグインです：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"devDependencies\": {\n    \"tailwindcss\": \"^4.0.0\",           // 最新版\n    \"@tailwindcss/typography\": \"^0.5.16\" // v4未対応\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこのプラグインはMarkdownコンテンツに\u003ccode\u003eprose\u003c/code\u003eクラスでスタイルを適用しますが、v4との互換性がまだ完全ではありませんでした。\u003c/p\u003e\n\u003ch3\u003e3. PostCSS設定の変更\u003c/h3\u003e\n\u003cp\u003ev4では新しいPostCSS設定方法が導入されました：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e// v4の新しい設定（問題あり）\nconst config = {\n  plugins: [\"@tailwindcss/postcss\"],\n};\n\n// v3の従来の設定（安定）\nexport default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e解決策の検討：3つの選択肢\u003c/h2\u003e\n\u003ch3\u003e選択肢1：Tailwind CSS v3へのダウングレード（採用）\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eメリット\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e✅ 安定性が高い\u003c/li\u003e\n\u003cli\u003e✅ プラグインの互換性が保証されている\u003c/li\u003e\n\u003cli\u003e✅ ドキュメントが充実\u003c/li\u003e\n\u003cli\u003e✅ コミュニティサポートが豊富\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eデメリット\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e❌ 最新機能が使えない\u003c/li\u003e\n\u003cli\u003e❌ 将来的に再度アップグレードが必要\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e選択肢2：v4を維持して手動でスタイル追加\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eメリット\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e✅ 最新版を使い続けられる\u003c/li\u003e\n\u003cli\u003e✅ 新機能を活用できる\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eデメリット\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e❌ 大量のカスタムCSSが必要\u003c/li\u003e\n\u003cli\u003e❌ メンテナンスコストが高い\u003c/li\u003e\n\u003cli\u003e❌ プラグインの恩恵を受けられない\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e選択肢3：v4対応を待つ\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eメリット\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e✅ 将来的に最良の解決策になる可能性\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eデメリット\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e❌ いつ対応されるか不明\u003c/li\u003e\n\u003cli\u003e❌ 現在の問題が解決しない\u003c/li\u003e\n\u003cli\u003e❌ プロジェクトの進行に影響\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eなぜダウングレードを選んだか\u003c/h3\u003e\n\u003cp\u003eプロジェクトの要件と状況を考慮した結果：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e安定性重視\u003c/strong\u003e：ブログサイトは安定稼働が最優先\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e時間的制約\u003c/strong\u003e：すぐに問題を解決する必要があった\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eリスク最小化\u003c/strong\u003e：v3は実績があり、問題が少ない\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e実装手順：ステップバイステップガイド\u003c/h2\u003e\n\u003ch3\u003eStep 1：パッケージのアンインストール\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# v4関連パッケージを削除\nnpm uninstall tailwindcss @tailwindcss/postcss\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eStep 2：v3系パッケージのインストール\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# v3系と必要な依存関係をインストール\nnpm install -D tailwindcss@^3.4.0 postcss autoprefixer\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eポイント\u003c/strong\u003e：\u003ccode\u003e^3.4.0\u003c/code\u003eのように範囲指定することで、v3系の最新パッチは受け取れます。\u003c/p\u003e\n\u003ch3\u003eStep 3：PostCSS設定の更新\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e// postcss.config.mjs\nexport default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eStep 4：Tailwind設定ファイルの確認\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// tailwind.config.ts\nimport { type Config } from 'tailwindcss'\nimport typography from '@tailwindcss/typography'\n\nconst config: Config = {\n  content: ['./src/**/*.{js,ts,jsx,tsx,mdx}'],\n  darkMode: 'class',\n  theme: {\n    extend: {\n      // カスタマイズ設定\n    },\n  },\n  plugins: [typography], // プラグインが正常に動作\n}\n\nexport default config\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eStep 5：CSSファイルの修正\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-css\"\u003e/* src/app/globals.css */\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* カスタムスタイル */\nbody {\n  @apply bg-black text-white;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eStep 6：ビルドとテスト\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# ビルドを実行\nnpm run build\n\n# 開発サーバーで確認\nnpm run dev\n\n# 本番ビルドのプレビュー\nnpm run start\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e実務で役立つTips：ダウングレード時の注意点\u003c/h2\u003e\n\u003ch3\u003e1. バージョン管理の重要性\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e// package.json\n{\n  \"devDependencies\": {\n    // NG: 最新版を自動的に取得\n    \"tailwindcss\": \"latest\",\n    \n    // OK: メジャーバージョンを固定\n    \"tailwindcss\": \"^3.4.0\",\n    \n    // BEST: 完全にバージョンを固定（重要なプロジェクト）\n    \"tailwindcss\": \"3.4.17\"\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e2. 変更前のバックアップ\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# ブランチを作成して作業\ngit checkout -b fix/downgrade-tailwind\n\n# 重要ファイルのバックアップ\ncp package.json package.json.backup\ncp package-lock.json package-lock.json.backup\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e3. 段階的な確認\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# 1. 依存関係の確認\nnpm list tailwindcss\n\n# 2. ビルドエラーの確認\nnpm run build 2\u003e\u0026#x26;1 | tee build.log\n\n# 3. 実際の表示確認\n# - 開発環境\n# - ステージング環境\n# - 本番環境\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e4. チーム内での情報共有\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-markdown\"\u003e## 変更内容\n- Tailwind CSS: v4.0.0 → v3.4.17\n- 理由：v4とtypographyプラグインの互換性問題\n- 影響：なし（v3で全機能カバー）\n- TODO：v4対応完了後に再アップグレード検討\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eよくあるトラブルと解決方法\u003c/h2\u003e\n\u003ch3\u003eQ1：ダウングレード後もスタイルが適用されない\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e確認ポイント\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003enode_modules\u003c/code\u003eを削除して再インストール\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003erm -rf node_modules package-lock.json\nnpm install\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eキャッシュのクリア\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003enpm cache clean --force\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eQ2：ビルド時に警告が出る\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e対処法\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# PostCSSの設定ファイル名を確認\n# .mjs, .js, .cjs のいずれかに統一\nmv postcss.config.js postcss.config.mjs\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eQ3：特定の機能が使えなくなった\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e解決策\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e// v4の新機能を使っていた場合\n// 代替手段を検討\n\n// 例：v4の新しいユーティリティ\n// → カスタムCSSクラスで対応\n.custom-class {\n  /* v3でサポートされていないスタイル */\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eダウングレードの判断基準\u003c/h2\u003e\n\u003ch3\u003eダウングレードすべき時\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e✅ プラグインの互換性問題がある\u003c/li\u003e\n\u003cli\u003e✅ 本番環境で重大な問題が発生\u003c/li\u003e\n\u003cli\u003e✅ 早急な対応が必要\u003c/li\u003e\n\u003cli\u003e✅ 安定性が最優先\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eアップグレードを待つべき時\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e⏸ 新機能が必須要件\u003c/li\u003e\n\u003cli\u003e⏸ 開発環境のみの使用\u003c/li\u003e\n\u003cli\u003e⏸ 時間的余裕がある\u003c/li\u003e\n\u003cli\u003e⏸ カスタム実装で対応可能\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eまとめ：学んだこと\u003c/h2\u003e\n\u003ch3\u003e1. 最新版＝最良ではない\u003c/h3\u003e\n\u003cp\u003e新しいバージョンには以下のリスクがあります：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eプラグインの未対応\u003c/li\u003e\n\u003cli\u003eドキュメントの不足\u003c/li\u003e\n\u003cli\u003eバグの存在\u003c/li\u003e\n\u003cli\u003eコミュニティサポートの不足\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e2. 段階的なアップグレードの重要性\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-mermaid\"\u003egraph LR\n    A[現行版] --\u003e B[開発環境でテスト]\n    B --\u003e C[ステージング環境]\n    C --\u003e D[本番環境]\n    B -.-\u003e|問題発生| E[ロールバック]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e3. バージョン管理の重要性\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003epackage-lock.json\u003c/code\u003eを必ずコミット\u003c/li\u003e\n\u003cli\u003eバージョン範囲を適切に設定\u003c/li\u003e\n\u003cli\u003e変更履歴を記録\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e実務での応用：今後のために\u003c/h2\u003e\n\u003ch3\u003eプロジェクト開始時のチェックリスト\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-markdown\"\u003e- [ ] 使用するライブラリのバージョン確認\n- [ ] 依存関係の互換性チェック\n- [ ] LTS（長期サポート）版の検討\n- [ ] アップグレードパスの確認\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCI/CDパイプラインでの対策\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e# GitHub Actionsの例\n- name: Version Check\n  run: |\n    npm list tailwindcss\n    npm audit\n    npm run build\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eドキュメント化\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-markdown\"\u003e# 技術スタック\n| ライブラリ | バージョン | 理由 | 更新予定 |\n|----------|----------|------|---------|\n| Tailwind CSS | 3.4.17 | 安定性重視 | v4対応待ち |\n| Next.js | 15.3.3 | 最新安定版 | 継続更新 |\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eさいごに\u003c/h2\u003e\n\u003cp\u003eバージョン管理は開発者にとって避けて通れない課題です。今回の経験から学んだのは：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e問題を正確に把握する\u003c/strong\u003e：環境による違いを理解\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e選択肢を比較検討する\u003c/strong\u003e：メリット・デメリットを整理\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e適切な判断をする\u003c/strong\u003e：プロジェクトの要件に合わせて選択\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e知見を共有する\u003c/strong\u003e：チームや コミュニティに還元\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eこの記事が、同じような問題に直面した方の助けになれば幸いです。\u003c/p\u003e\n\u003ch2\u003e参考リンク\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://v3.tailwindcss.com/\"\u003eTailwind CSS v3 Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tailwindcss.com/docs/v4\"\u003eTailwind CSS v4 Breaking Changes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.npmjs.com/about-semantic-versioning\"\u003enpm Semantic Versioning\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.atlassian.com/git/tutorials/comparing-workflows\"\u003eGit Branching Strategies\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto py-10 px-4\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-3xl font-bold mb-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-green-600\",\"children\":[\"#\",7]}],\" \",\"Tailwind CSS v4からv3へのダウングレード完全ガイド：バージョン互換性問題の解決\"]}],[\"$\",\"ul\",null,{\"className\":\"list-none border-b border-gray-600 pb-4 mb-6\",\"children\":[[\"$\",\"li\",null,{\"className\":\"text-gray-500 text-sm\",\"children\":[\"作成日時: \",\"2025-08-02 07:00\"]}],[\"$\",\"li\",null,{\"className\":\"text-gray-500 text-sm\",\"children\":[\"更新日時: \",\"2025-08-02 19:30\"]}],[\"$\",\"li\",null,{\"className\":\"flex flex-wrap gap-2 mt-2\",\"children\":[[\"$\",\"span\",\"0\",{\"className\":\"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs\",\"children\":\"Tailwind CSS\"}],[\"$\",\"span\",\"1\",{\"className\":\"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs\",\"children\":\"トラブルシューティング\"}],[\"$\",\"span\",\"2\",{\"className\":\"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs\",\"children\":\"初心者向け\"}],[\"$\",\"span\",\"3\",{\"className\":\"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs\",\"children\":\"Next.js\"}],[\"$\",\"span\",\"4\",{\"className\":\"px-2 py-1 bg-gray-800 text-gray-300 rounded text-xs\",\"children\":\"CSS\"}]]}]]}],[\"$\",\"nav\",null,{\"className\":\"mb-6 pb-4 border-b border-gray-700 flex justify-between\",\"children\":[[\"$\",\"$L12\",null,{\"href\":\"/\",\"className\":\"text-blue-400 hover:text-blue-300 hover:underline\",\"children\":\"← ホームへ\"}],[\"$\",\"$L12\",null,{\"href\":\"/blog\",\"className\":\"text-blue-400 hover:text-blue-300 hover:underline\",\"children\":\"記事一覧へ →\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose dark:prose-invert\",\"dangerouslySetInnerHTML\":{\"__html\":\"$13\"}}],[\"$\",\"nav\",null,{\"className\":\"mt-8 pt-4 border-t border-gray-700 flex justify-between\",\"children\":[[\"$\",\"$L12\",null,{\"href\":\"/\",\"className\":\"text-blue-400 hover:text-blue-300 hover:underline\",\"children\":\"← ホームへ\"}],[\"$\",\"$L12\",null,{\"href\":\"/blog\",\"className\":\"text-blue-400 hover:text-blue-300 hover:underline\",\"children\":\"記事一覧へ →\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"11:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Maita Tomoya Dev IO\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"米田智哉の技術ブログ。キャッチアップしたことをメモします。\"}]],\"error\":null,\"digest\":\"$undefined\"}\nb:{\"metadata\":\"$11:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>