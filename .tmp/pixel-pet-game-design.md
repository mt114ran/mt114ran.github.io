# ドット絵ペット育成ゲーム 設計書

## 1. プロジェクト概要

### 1.1 コンセプト
- デジモン・たまごっち風のドット絵ペット育成ゲーム
- ブラウザベースで動作し、Chrome拡張機能でも楽しめる
- シンプルで懐かしい8bit/16bitスタイルのビジュアル

### 1.2 ターゲットユーザー
- 懐かしいデジタルペットを楽しみたい大人
- 作業中の癒しを求めるデスクワーカー
- レトロゲーム愛好家

## 2. システム構成

### 2.1 アーキテクチャ
```
┌─────────────────────────────────────────┐
│            Chrome Extension              │
│  ├─ Popup UI (React)                    │
│  ├─ Background Service Worker            │
│  └─ Storage Sync                        │
├─────────────────────────────────────────┤
│            Web Application               │
│  ├─ Next.js (メインアプリ)              │
│  ├─ Canvas API (描画エンジン)           │
│  └─ LocalStorage (データ保存)           │
├─────────────────────────────────────────┤
│            Shared Components             │
│  ├─ Pet Logic (育成ロジック)            │
│  ├─ Animation Engine                    │
│  └─ Sprite Renderer                     │
└─────────────────────────────────────────┘
```

### 2.2 技術スタック
- **フロントエンド**: Next.js, React, TypeScript
- **描画**: Canvas API / WebGL (PixiJS)
- **状態管理**: Zustand
- **データ永続化**: LocalStorage / Chrome Storage API
- **アニメーション**: RequestAnimationFrame
- **スタイリング**: Tailwind CSS

## 3. ゲーム仕様

### 3.1 キャラクター

#### 基本ステータス
```typescript
interface PetStatus {
  name: string;           // ペットの名前
  level: number;          // レベル (1-99)
  exp: number;            // 経験値
  hunger: number;         // 空腹度 (0-100)
  happiness: number;      // 幸福度 (0-100)
  health: number;         // 健康度 (0-100)
  strength: number;       // 強さ
  intelligence: number;   // 知能
  agility: number;        // 素早さ
  evolutionStage: number; // 進化段階 (0-4)
  age: number;           // 年齢（分単位）
}
```

#### 進化システム
1. **卵** (Stage 0) - 初期状態
2. **幼体** (Stage 1) - 孵化後
3. **成長期** (Stage 2) - 基本形態
4. **成熟期** (Stage 3) - 進化形態
5. **完全体** (Stage 4) - 最終形態

### 3.2 アクション

#### プレイヤーアクション
1. **餌やり** - 空腹度回復、わずかに経験値獲得
2. **遊ぶ** - 幸福度上昇、親密度アップ
3. **トレーニング** - ステータス上昇、経験値獲得
4. **休憩** - 健康度回復
5. **掃除** - 環境を清潔に保つ

#### ペットアクション（自動）
1. **歩き回る** - ランダムに左右移動
2. **ジャンプ** - 喜びの表現
3. **眠る** - 疲労時
4. **食事要求** - 空腹時のアニメーション
5. **遊び要求** - 退屈時のアニメーション

### 3.3 アニメーションパターン

```javascript
const animations = {
  idle: [frame1, frame2],           // 待機
  walk: [frame1, frame2, frame3],   // 歩行
  happy: [jump1, jump2, jump3],     // 喜び
  eat: [eat1, eat2, eat3],          // 食事
  sleep: [sleep1, sleep2],          // 睡眠
  sad: [sad1, sad2],                // 悲しみ
  sick: [sick1, sick2],             // 病気
  training: [train1, train2],       // トレーニング
};
```

## 4. 画面設計

### 4.1 メイン画面（Webページ）
```
┌──────────────────────────────────────┐
│  ペット名: ピクセル  Lv.15  ❤️ 85/100 │
├──────────────────────────────────────┤
│                                      │
│        [ペット表示エリア]             │
│         (Canvas 320x240)             │
│            🐣 <- アニメーション       │
│                                      │
├──────────────────────────────────────┤
│  空腹: ████████░░ 80%                │
│  幸福: ██████░░░░ 60%                │
│  健康: █████████░ 90%                │
├──────────────────────────────────────┤
│ [🍖餌] [🎮遊ぶ] [💪訓練] [😴休憩]    │
└──────────────────────────────────────┘
```

### 4.2 Chrome拡張機能（ポップアップ）
```
┌─────────────────┐
│  ピクセル Lv.15 │
├─────────────────┤
│     🐣          │
│   (128x128)     │
├─────────────────┤
│ 空腹: ████░ 80% │
│ 幸福: ███░░ 60% │
├─────────────────┤
│ [餌] [遊] [訓]  │
└─────────────────┘
```

## 5. データ管理

### 5.1 保存データ構造
```typescript
interface SaveData {
  pet: PetStatus;
  statistics: {
    totalPlayTime: number;
    totalFeedings: number;
    totalTrainings: number;
    lastSaveTime: number;
  };
  settings: {
    soundEnabled: boolean;
    notificationsEnabled: boolean;
    autoSave: boolean;
  };
}
```

### 5.2 同期戦略
- Web ↔ Chrome拡張: Chrome Storage Sync API使用
- 5秒ごとの自動保存
- オフライン時は時間経過を計算して反映

## 6. スプライトデザイン

### 6.1 キャラクターサイズ
- 基本: 32x32ピクセル
- 進化後: 48x48ピクセル
- 最終形態: 64x64ピクセル

### 6.2 カラーパレット
```css
/* レトロゲーム風 16色パレット */
--color-black: #000000;
--color-white: #FFFFFF;
--color-gray-dark: #696969;
--color-gray-light: #C0C0C0;
--color-red: #FF0000;
--color-green: #00FF00;
--color-blue: #0000FF;
--color-yellow: #FFFF00;
--color-cyan: #00FFFF;
--color-magenta: #FF00FF;
--color-brown: #8B4513;
--color-orange: #FFA500;
--color-pink: #FFC0CB;
--color-purple: #800080;
--color-lime: #32CD32;
--color-teal: #008080;
```

## 7. 実装フェーズ

### Phase 1: コア機能（MVP）
1. 基本的なペット表示
2. 餌やり機能
3. 簡単なアニメーション（歩行、待機）
4. ステータス表示
5. LocalStorage保存

### Phase 2: 育成機能
1. トレーニングシステム
2. 進化システム
3. 複数のアニメーション追加
4. サウンドエフェクト

### Phase 3: Chrome拡張機能
1. ポップアップUI
2. バックグラウンド処理
3. 通知機能
4. データ同期

### Phase 4: 拡張機能
1. ミニゲーム追加
2. アイテムシステム
3. 複数ペット対応
4. ソーシャル機能（ペット交流）

## 8. ゲームバランス

### 8.1 時間経過による変化
- 空腹度: -10/時間
- 幸福度: -5/時間
- 健康度: 空腹度50%以下で-5/時間

### 8.2 進化条件
- レベル10で第2形態
- レベル25で第3形態
- レベル50で第4形態
- 特定ステータスで分岐進化

## 9. 通知システム

### 9.1 通知タイミング
- 空腹度20%以下: "お腹が空いたよ！"
- 幸福度20%以下: "遊んでほしいな..."
- 健康度30%以下: "体調が悪いよ..."
- レベルアップ時: "レベルアップ！"
- 進化時: "進化の時が来た！"

## 10. 今後の拡張アイデア

1. **天候システム** - 時間帯や季節による変化
2. **部屋のカスタマイズ** - 背景や家具の配置
3. **ペット同士の交流** - 他のユーザーのペットと遊ぶ
4. **実績システム** - 育成の記録とトロフィー
5. **ARモード** - カメラを使った現実世界での表示

## 11. 開発スケジュール

- **Week 1-2**: 基本システム構築、ペット表示
- **Week 3-4**: 育成機能実装、アニメーション
- **Week 5-6**: Chrome拡張機能開発
- **Week 7-8**: テスト、バランス調整、リリース準備