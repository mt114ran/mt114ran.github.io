(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{4116:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var l=r(5155),n=r(2115);let s={I:{shape:[[1,1,1,1]],color:"#00f0f0"},O:{shape:[[1,1],[1,1]],color:"#f0f000"},T:{shape:[[0,1,0],[1,1,1]],color:"#a000f0"},S:{shape:[[0,1,1],[1,1,0]],color:"#00f000"},Z:{shape:[[1,1,0],[0,1,1]],color:"#f00000"},J:{shape:[[1,0,0],[1,1,1]],color:"#0000f0"},L:{shape:[[0,0,1],[1,1,1]],color:"#f0a000"}};function c(){let e=(0,n.useRef)(null),[t,r]=(0,n.useState)(0),[c,a]=(0,n.useState)(0),[i,o]=(0,n.useState)(1),[u,d]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),h=(0,n.useRef)([]),m=(0,n.useRef)(null),b=(0,n.useRef)(0),y=(0,n.useRef)(0),g=(0,n.useRef)(0),v=()=>{h.current=Array(20).fill(null).map(()=>Array(10).fill(0))},p=()=>{let e=Object.keys(s),t=s[e[Math.floor(Math.random()*e.length)]];return{shape:t.shape,color:t.color,x:Math.floor(5)-Math.floor(t.shape[0].length/2),y:0}},j=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(let n=0;n<e.shape.length;n++)for(let s=0;s<e.shape[n].length;s++)if(e.shape[n][s]){let c=e.x+s+r,a=e.y+n+l;if(c<0||c>=10||a>=20||a>=0&&t[a][c])return!0}return!1},w=(e,t)=>{e.shape.forEach((r,l)=>{r.forEach((r,n)=>{r&&e.y+l>=0&&(t[e.y+l][e.x+n]=e.color)})})},N=()=>{let e=0;e:for(let t=19;t>=0;t--){for(let e=0;e<10;e++)if(!h.current[t][e])continue e;h.current.splice(t,1),h.current.unshift(Array(10).fill(0)),e++,t++}e>0&&(a(t=>t+e),r(t=>t+100*e*i),o(()=>Math.floor((c+e)/10)+1))},k=e=>{let t=e.shape[0].map((t,r)=>e.shape.map(e=>e[r]).reverse());j({...e,shape:t},h.current)||(e.shape=t)},E=()=>{let t=e.current;if(!t)return;let r=t.getContext("2d");if(r){r.fillStyle="#000",r.fillRect(0,0,t.width,t.height),r.strokeStyle="#333",r.lineWidth=.5;for(let e=0;e<=10;e++)r.beginPath(),r.moveTo(30*e,0),r.lineTo(30*e,600),r.stroke();for(let e=0;e<=20;e++)r.beginPath(),r.moveTo(0,30*e),r.lineTo(300,30*e),r.stroke();if(h.current.forEach((e,t)=>{e.forEach((e,l)=>{e&&(r.fillStyle=String(e),r.fillRect(30*l,30*t,29,29))})}),m.current&&!u){let e=m.current;e.shape.forEach((t,l)=>{t.forEach((t,n)=>{t&&(r.fillStyle=e.color,r.fillRect((e.x+n)*30,(e.y+l)*30,29,29))})})}}},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(u||f)return;let t=e-g.current;g.current=e,y.current+=t;let r=Math.max(100,1e3-(i-1)*100);if(y.current>r){if(m.current)if(j(m.current,h.current,0,1)){if(w(m.current,h.current),N(),m.current=p(),j(m.current,h.current))return void d(!0)}else m.current.y++;y.current=0}E(),b.current=requestAnimationFrame(S)};return(0,n.useEffect)(()=>{let e=e=>{if(!u){if("Escape"===e.key){x(e=>!e),f||(b.current=requestAnimationFrame(S));return}if(!f&&m.current)switch(e.key){case"ArrowLeft":!j(m.current,h.current,-1,0)&&m.current.x--;break;case"ArrowRight":!j(m.current,h.current,1,0)&&m.current.x++;break;case"ArrowDown":j(m.current,h.current,0,1)||(m.current.y++,r(e=>e+1));break;case"ArrowUp":k(m.current);break;case" ":for(;!j(m.current,h.current,0,1);)m.current.y++,r(e=>e+2)}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[u,f,i]),(0,n.useEffect)(()=>(v(),m.current=p(),b.current=requestAnimationFrame(S),()=>{b.current&&cancelAnimationFrame(b.current)}),[]),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-8 p-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("canvas",{ref:e,width:300,height:600,className:"border-2 border-gray-600"}),u&&(0,l.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-white text-center",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"GAME OVER"}),(0,l.jsx)("button",{onClick:()=>{v(),m.current=p(),r(0),a(0),o(1),d(!1),x(!1),y.current=0,g.current=0,b.current=requestAnimationFrame(S)},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded text-white font-bold",children:"もう一度プレイ"})]})}),f&&!u&&(0,l.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-white text-3xl font-bold",children:"PAUSED"})})]}),(0,l.jsxs)("div",{className:"text-white",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"TETRIS"}),(0,l.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,l.jsxs)("div",{className:"text-xl",children:["スコア: ",t]}),(0,l.jsxs)("div",{className:"text-xl",children:["ライン: ",c]}),(0,l.jsxs)("div",{className:"text-xl",children:["レベル: ",i]})]}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-2",children:"操作方法"}),(0,l.jsx)("div",{children:"← → : 移動"}),(0,l.jsx)("div",{children:"↑ : 回転"}),(0,l.jsx)("div",{children:"↓ : 落下"}),(0,l.jsx)("div",{children:"スペース : 即落下"}),(0,l.jsx)("div",{children:"ESC : 一時停止"})]}),!u&&(0,l.jsx)("button",{onClick:()=>x(e=>!e),className:"mt-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:f?"再開":"一時停止"})]})]})}function a(){let e=(0,n.useRef)(null),[t,r]=(0,n.useState)(0),[s,c]=(0,n.useState)(0),[a,i]=(0,n.useState)(!1),[o,u]=(0,n.useState)(!1),d=(0,n.useRef)([{x:10,y:10}]),f=(0,n.useRef)({x:1,y:0}),x=(0,n.useRef)({x:15,y:15}),h=(0,n.useRef)(null),m=(0,n.useRef)(150),b=()=>{let e;do e={x:Math.floor(20*Math.random()),y:Math.floor(20*Math.random())};while(d.current.some(t=>t.x===e.x&&t.y===e.y));x.current=e},y=()=>{let t=e.current;if(!t)return;let r=t.getContext("2d");if(r){r.fillStyle="#111",r.fillRect(0,0,t.width,t.height),r.strokeStyle="#222",r.lineWidth=.5;for(let e=0;e<=20;e++)r.beginPath(),r.moveTo(20*e,0),r.lineTo(20*e,400),r.stroke(),r.beginPath(),r.moveTo(0,20*e),r.lineTo(400,20*e),r.stroke();r.fillStyle="#ff0000",r.fillRect(20*x.current.x+2,20*x.current.y+2,16,16),d.current.forEach((e,t)=>{r.fillStyle=0===t?"#00ff00":"#00aa00",r.fillRect(20*e.x+1,20*e.y+1,18,18)})}},g=()=>{if(a||o)return;let e={...d.current[0]};if(e.x+=f.current.x,e.y+=f.current.y,e.x<0||e.x>=20||e.y<0||e.y>=20||d.current.some(t=>t.x===e.x&&t.y===e.y))return void i(!0);d.current.unshift(e),e.x===x.current.x&&e.y===x.current.y?(r(e=>{let t=e+10;return t>s&&c(t),t%50==0&&(m.current=Math.max(50,m.current-20)),t}),b()):d.current.pop(),y()},v=()=>{h.current&&clearInterval(h.current),h.current=setInterval(g,m.current)};return(0,n.useEffect)(()=>{let e=e=>{if("Escape"===e.key)return void u(e=>!e);if(a||o)return;let t={...f.current};switch(e.key){case"ArrowUp":case"w":case"W":0===f.current.y&&(t.x=0,t.y=-1);break;case"ArrowDown":case"s":case"S":0===f.current.y&&(t.x=0,t.y=1);break;case"ArrowLeft":case"a":case"A":0===f.current.x&&(t.x=-1,t.y=0);break;case"ArrowRight":case"d":case"D":0===f.current.x&&(t.x=1,t.y=0)}f.current=t};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,o,s]),(0,n.useEffect)(()=>{let t=e.current;if(!t)return;let r=0,l=0,n=e=>{r=e.touches[0].clientX,l=e.touches[0].clientY},s=e=>{if(a||o)return;let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,s=t-r,c=n-l;Math.abs(s)>Math.abs(c)?s>0&&0===f.current.x?f.current={x:1,y:0}:s<0&&0===f.current.x&&(f.current={x:-1,y:0}):c>0&&0===f.current.y?f.current={x:0,y:1}:c<0&&0===f.current.y&&(f.current={x:0,y:-1})};return t.addEventListener("touchstart",n),t.addEventListener("touchend",s),()=>{t.removeEventListener("touchstart",n),t.removeEventListener("touchend",s)}},[a,o]),(0,n.useEffect)(()=>(y(),v(),()=>{h.current&&clearInterval(h.current)}),[]),(0,n.useEffect)(()=>{a||o?h.current&&clearInterval(h.current):v()},[a,o]),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-8 p-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("canvas",{ref:e,width:400,height:400,className:"border-2 border-gray-600 touch-none"}),a&&(0,l.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-white text-center",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"GAME OVER"}),(0,l.jsxs)("p",{className:"text-xl mb-4",children:["スコア: ",t]}),(0,l.jsx)("button",{onClick:()=>{d.current=[{x:10,y:10}],f.current={x:1,y:0},b(),r(0),i(!1),u(!1),m.current=150,v()},className:"px-6 py-3 bg-green-600 hover:bg-green-700 rounded text-white font-bold",children:"もう一度プレイ"})]})}),o&&!a&&(0,l.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-white text-3xl font-bold",children:"PAUSED"})})]}),(0,l.jsxs)("div",{className:"text-white",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"SNAKE"}),(0,l.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,l.jsxs)("div",{className:"text-xl",children:["スコア: ",t]}),(0,l.jsxs)("div",{className:"text-xl",children:["ハイスコア: ",s]}),(0,l.jsxs)("div",{className:"text-xl",children:["スピード: ",Math.floor((150-m.current)/20)+1]})]}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-2",children:"操作方法"}),(0,l.jsx)("div",{children:"↑↓←→ / WASD : 方向転換"}),(0,l.jsx)("div",{children:"ESC : 一時停止"}),(0,l.jsx)("div",{className:"mt-2 text-gray-400",children:"モバイル: スワイプで操作"})]}),!a&&(0,l.jsx)("button",{onClick:()=>u(e=>!e),className:"mt-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:o?"再開":"一時停止"})]})]})}function i(){let e=(0,n.useRef)(null),[t,r]=(0,n.useState)(0),[s,c]=(0,n.useState)(0),[a,i]=(0,n.useState)(!1),[o,u]=(0,n.useState)(!1),d=(0,n.useRef)([,,,,].fill(null).map(()=>[,,,,].fill(0))),f=(0,n.useRef)([]),x=(0,n.useRef)(0),h=e=>{let t={0:{bg:"#cdc1b4",text:"#776e65"},2:{bg:"#eee4da",text:"#776e65"},4:{bg:"#ede0c8",text:"#776e65"},8:{bg:"#f2b179",text:"#f9f6f2"},16:{bg:"#f59563",text:"#f9f6f2"},32:{bg:"#f67c5f",text:"#f9f6f2"},64:{bg:"#f65e3b",text:"#f9f6f2"},128:{bg:"#edcf72",text:"#f9f6f2"},256:{bg:"#edcc61",text:"#f9f6f2"},512:{bg:"#edc850",text:"#f9f6f2"},1024:{bg:"#edc53f",text:"#f9f6f2"},2048:{bg:"#edc22e",text:"#f9f6f2"}};return t[e]||t[2048]},m=()=>{let e=[];for(let t=0;t<4;t++)for(let r=0;r<4;r++)0===d.current[t][r]&&e.push({x:r,y:t});if(e.length>0){let t=e[Math.floor(Math.random()*e.length)];d.current[t.y][t.x]=.9>Math.random()?2:4}},b=()=>{d.current=[,,,,].fill(null).map(()=>[,,,,].fill(0)),m(),m()},y=()=>{let t=e.current;if(!t)return;let r=t.getContext("2d");if(r){r.fillStyle="#bbada0",r.fillRect(0,0,450,450);for(let e=0;e<4;e++)for(let t=0;t<4;t++){let l=d.current[e][t],n=110*t+10,s=110*e+10,c=h(l);r.fillStyle=c.bg,r.fillRect(n,s,100,100),0!==l&&(r.fillStyle=c.text,r.font=l>=1024?"bold 35px Arial":l>=128?"bold 45px Arial":"bold 55px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(l.toString(),n+50,s+50))}}},g=()=>{for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(0===d.current[e][t])return!0;for(let e=0;e<4;e++)for(let t=0;t<4;t++){let r=d.current[e][t];if(t<3&&r===d.current[e][t+1]||e<3&&r===d.current[e+1][t])return!0}return!1},v=e=>{let t=e.filter(e=>0!==e),r=Array(4-t.length).fill(0);return t.concat(r)},p=e=>{for(let t=0;t<3;t++)0!==e[t]&&e[t]===e[t+1]&&(e[t]*=2,e[t+1]=0,r(r=>{let l=r+e[t];return l>s&&c(l),l}),2048===e[t]&&u(!0));return e},j=e=>{f.current=d.current.map(e=>[...e]),x.current=t;let r=!1;if("left"===e)for(let e=0;e<4;e++){let t=d.current[e],l=[...t];t=p(t=v(t)),t=v(t),d.current[e]=t,JSON.stringify(l)!==JSON.stringify(t)&&(r=!0)}else if("right"===e)for(let e=0;e<4;e++){let t=d.current[e],l=[...t];t.reverse(),t=p(t=v(t)),(t=v(t)).reverse(),d.current[e]=t,JSON.stringify(l)!==JSON.stringify(t)&&(r=!0)}else if("up"===e)for(let e=0;e<4;e++){let t=[];for(let r=0;r<4;r++)t.push(d.current[r][e]);let l=[...t];t=p(t=v(t)),t=v(t);for(let r=0;r<4;r++)d.current[r][e]=t[r];JSON.stringify(l)!==JSON.stringify(t)&&(r=!0)}else if("down"===e)for(let e=0;e<4;e++){let t=[];for(let r=0;r<4;r++)t.push(d.current[r][e]);let l=[...t];t.reverse(),t=p(t=v(t)),(t=v(t)).reverse();for(let r=0;r<4;r++)d.current[r][e]=t[r];JSON.stringify(l)!==JSON.stringify(t)&&(r=!0)}r&&(m(),y(),g()||i(!0))},w=()=>{f.current.length>0&&(d.current=f.current.map(e=>[...e]),r(x.current),y())};(0,n.useEffect)(()=>{let e=e=>{if(!a||o)switch(e.key){case"ArrowLeft":e.preventDefault(),j("left");break;case"ArrowRight":e.preventDefault(),j("right");break;case"ArrowUp":e.preventDefault(),j("up");break;case"ArrowDown":e.preventDefault(),j("down");break;case"z":case"Z":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),w())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,o,t,s]),(0,n.useEffect)(()=>{let t=e.current;if(!t)return;let r=0,l=0,n=e=>{r=e.touches[0].clientX,l=e.touches[0].clientY},s=e=>{if(a&&!o)return;let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,s=t-r,c=n-l;(Math.abs(s)>50||Math.abs(c)>50)&&(Math.abs(s)>Math.abs(c)?s>0?j("right"):j("left"):c>0?j("down"):j("up"))};return t.addEventListener("touchstart",n),t.addEventListener("touchend",s),()=>{t.removeEventListener("touchstart",n),t.removeEventListener("touchend",s)}},[a,o]),(0,n.useEffect)(()=>{b(),y()},[]);let N=()=>{b(),r(0),i(!1),u(!1),f.current=[],x.current=0,y()};return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-8 p-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("canvas",{ref:e,width:450,height:450,className:"rounded-lg touch-none"}),a&&!o&&(0,l.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-lg",children:(0,l.jsxs)("div",{className:"text-white text-center",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"GAME OVER"}),(0,l.jsxs)("p",{className:"text-xl mb-4",children:["スコア: ",t]}),(0,l.jsx)("button",{onClick:N,className:"px-6 py-3 bg-yellow-600 hover:bg-yellow-700 rounded text-white font-bold",children:"もう一度プレイ"})]})}),o&&(0,l.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center rounded-lg",children:(0,l.jsxs)("div",{className:"text-white text-center",children:[(0,l.jsx)("h2",{className:"text-4xl font-bold mb-4 text-yellow-400",children:"\uD83C\uDF89 2048達成！"}),(0,l.jsxs)("p",{className:"text-xl mb-4",children:["スコア: ",t]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("button",{onClick:()=>u(!1),className:"block w-full px-6 py-3 bg-green-600 hover:bg-green-700 rounded text-white font-bold",children:"続ける"}),(0,l.jsx)("button",{onClick:N,className:"block w-full px-6 py-3 bg-yellow-600 hover:bg-yellow-700 rounded text-white font-bold",children:"新しいゲーム"})]})]})})]}),(0,l.jsxs)("div",{className:"text-white",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"2048"}),(0,l.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,l.jsxs)("div",{className:"text-xl",children:["スコア: ",t]}),(0,l.jsxs)("div",{className:"text-xl",children:["ベスト: ",s]})]}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-2",children:"操作方法"}),(0,l.jsx)("div",{children:"↑↓←→ : スライド"}),(0,l.jsx)("div",{children:"Ctrl+Z : アンドゥ"}),(0,l.jsx)("div",{className:"mt-2 text-gray-400",children:"モバイル: スワイプで操作"})]}),(0,l.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,l.jsx)("button",{onClick:N,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded text-white",children:"新しいゲーム"}),(0,l.jsx)("button",{onClick:w,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"アンドゥ"})]}),(0,l.jsxs)("div",{className:"mt-4 text-sm text-gray-400",children:[(0,l.jsx)("p",{children:"同じ数字を合わせて"}),(0,l.jsx)("p",{children:"2048を目指そう！"})]})]})]})}function o(e){let{gameId:t}=e;return(0,n.useEffect)(()=>(document.body.style.margin="0",document.body.style.padding="0",document.body.style.overflow="hidden",()=>{document.body.style.margin="",document.body.style.padding="",document.body.style.overflow=""}),[]),(0,l.jsxs)("div",{className:"w-screen h-screen bg-gray-900 flex items-center justify-center",children:["tetris"===t&&(0,l.jsx)(c,{}),"snake"===t&&(0,l.jsx)(a,{}),"2048"===t&&(0,l.jsx)(i,{})]})}},7823:(e,t,r)=>{Promise.resolve().then(r.bind(r,4116))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7823)),_N_E=e.O()}]);